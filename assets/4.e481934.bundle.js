"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4],{14(c,b,a){a.d(b,{UB:()=>H,JG:()=>K,ZP:()=>w});var d,e,f,g,h,i,j=a(1),k=a(3),l=a(17),m=a(19),n=a(20),o=a(18),p=a(5);let q=function(){var[b,c]=(0,j.useState)(function(){return d||function(){}});return d||a.e(23).then(a.bind(a,45)).then(function(a){d=(0,p.MV)(a),c(function(){return d})}),b};var r=a(0);let s=function(a){var b=q(),c="```js\n"+a.children+"\n```";return(0,r.jsx)(k.ER,{children:b(c)})};var t=a(11),u=a(12);let v=function(b){var{url:d}=b,e=(0,u.s4)(),[a,f]=(0,j.useState)(),c=q();return((0,j.useEffect)(function(){(0,t.Bt)("ajaxGet",{url:d,callback:function(c,a,b){if(!1===e())return!1;200===b.status&&f(a.replace(/(\<\!\-\-hidden\-\-\>)([\s\S]*?)(\<\!\-\-\/hidden\-\-\>)/g,""))}})},[]),a)?(0,r.jsx)(k.XX,{children:(0,r.jsx)(k.ER,{children:c(a)})}):null},w=function(z){i=(0,k.UM)(y,i);var b,c,d,p,q,{header:A,children:B,code:C,git:a,npm:t,edit:u,id:D}=z,[E,I]=(0,j.useState)({on:!1}),w={};if(E.on?b=(0,r.jsx)(s,{children:C}):w=x.hidden,a){var F="https://raw.githubusercontent.com/"+a.replace(/(\/(blob|tree)\/(master|main)\/)/,"/$3/")+"README.md",G="https://github.com/"+a;c=(0,r.jsx)(v,{url:F}),d=(0,r.jsx)(k.JO,{atom:"a",target:"_blank",href:G,style:x.icon,children:e||(e=(0,r.jsx)(m.Z,{}))})}if(t){var H="https://www.npmjs.com/package/"+t;p=(0,r.jsx)(k.JO,{atom:"a",target:"_blank",href:H,style:x.icon,children:f||(f=(0,r.jsx)(n.Z,{}))})}return u&&(q=(0,r.jsx)(k.JO,{atom:"a",target:"_blank",href:u,style:x.icon,children:g||(g=(0,r.jsx)(o.Z,{}))})),(0,r.jsxs)(k.aV,{type:"segments",id:D,children:[(0,r.jsxs)(k.XX,{className:"tertiary",children:[(0,r.jsx)(k.h4,{style:x.header,className:"grey",children:A}),(0,r.jsxs)(k.iX,{style:x.iconBlock,children:[q,p,d,(0,r.jsx)(k.JO,{onClick:function(){return I(function(a){var{on:b}=a;return{on:!b}})},style:x.icon,children:h||(h=(0,r.jsx)(l.Z,{}))})]})]}),(0,r.jsx)(k.XX,{className:"secondary",style:w,styles:i.code,children:b}),(0,r.jsx)(k.XX,{children:B}),c]})};var x={header:{margin:0},hidden:{maxHeight:0,padding:"0 16px",margin:0,ovarflow:"hidden"},iconBlock:{position:"absolute",top:16,right:6},icon:{maxWidth:24,cursor:"pointer",marginRight:10}},y={code:[{transition:["padding 500ms ease"]}],fitWidth:[{whiteSpace:"break-spaces"},"code"]},z=a(2),A=a(239),B=a(16),C=a(7),D=a(8),E=["button","anchorLocator","updateUrl","resetUrl","children","id","onClose","path"],F=function(){var a=document.URL.split("#"),b=a.length-1,c="#"+a[b];return{lastAnchor:c}},G=function(c){var a=(0,D.JU)().URL,b=a.lastIndexOf("#"+c);-1!==b&&history.pushState("","",a.substring(0,b))};let H=function(b){var{button:f="Open full screen",anchorLocator:c=F,updateUrl:p=function(a){return history.pushState("","",(0,D.JU)().URL+"#"+a)},resetUrl:g=G,children:h,id:a,onClose:i,path:d}=b,l=(0,A.Z)(b,E),[m,q]=(0,j.useState)(),s=(0,j.useRef)();(0,j.useEffect)(function(){var{lastAnchor:b}=(0,C.ZP)(c,[d])||{};"#"+a===b?q(!0):q(function(a){return a&&(s.current="path"),!1})},[c,a,d]);var n=(0,j.useCallback)(function(){var{lastAnchor:b}=(0,C.ZP)(c,[d])||{};a&&a!==b&&p(a),q(!0)},[c,a,d]),o=(0,j.useCallback)(function(){"path"!==s.current&&(0,C.ZP)(g,[a]),(0,C.ZP)(i),q(!1),s.current=null},[g,a,i]),e=null;return m&&(e=(0,r.jsx)(B.IT,(0,z.Z)((0,z.Z)({},l),{},{onClose:o,children:h}))),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(k.zx,{onClick:n,children:f}),e]})};var I=a(36),J=["id"];let K=function(a){var{id:b="fullscreen"}=a,c=(0,A.Z)(a,J);return(0,r.jsx)(I.yR,{initStates:{":hash":"path"},children:function(a){return(0,r.jsx)(H,(0,z.Z)((0,z.Z)({},(0,z.Z)((0,z.Z)({},c),a)),{},{id:b,anchorLocator:I.ul,updateUrl:function(a){return(0,I.gH)("url",{url:(0,D.JU)().URL+"#"+a})},resetUrl:function(a){return(0,I.gH)("resetAnchor",a)}}))}})}},149(u,k,a){a.d(k,{O5:()=>aD});var v=a(240),w=a(241),x=a(480),y=a(9),z=a(10),c=a(238),A=a(2),B=a(239),b=a(1),C=a(3),D=a(46),E=a(5),F=a(242),G=a(29),H=a(7),I=a(53),J=a(6),K=a(52),L=a(44),M=a(24),N=a(0);let l=(0,b.memo)(function(a){var{multi:b={"":{}},id:c="marker-arrow-head",viewBox:d="0 0 10 10",d:e="M 0 0 L 10 5 L 0 10 z",refX:f=9,refY:g=5,markerUnits:h="strokeWidth",markerWidth:i=8,markerHeight:j=6,orient:k="auto",fill:l="#bbb"}=a;return(0,N.jsx)("defs",{children:(0,J.tW)(b).map(function(a){var m=c+a;return(0,N.jsx)("marker",(0,A.Z)((0,A.Z)({id:m,viewBox:d,refX:f,refY:g,markerUnits:h,markerWidth:i,markerHeight:j,orient:k,fill:l},b[a]),{},{children:(0,N.jsx)(M.Z,{d:e,style:O.path})}),m)})})});var O={path:{strokeWidth:1,strokeDasharray:"1, 0"}};let P=(0,b.memo)(function(a){return(0,N.jsx)(M.Z,(0,A.Z)((0,A.Z)({},a),{},{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}))});var f=function(b){(0,y.Z)(a,b);var d=(0,z.Z)(a);function a(){var b;(0,v.Z)(this,a);for(var f=arguments.length,g=new Array(f),e=0;e<f;e++)g[e]=arguments[e];return b=d.call.apply(d,[this].concat(g)),(0,c.Z)((0,x.Z)(b),"state",{r:0}),(0,c.Z)((0,x.Z)(b),"handleEl",function(a){return b.el=a}),b}return(0,w.Z)(a,[{key:"componentDidMount",value:function(){var{width:a}=this.el.getBBox();a&&this.setState({r:a/2})}},{key:"render",value:function(){var{x:c,y:d,style:f,onClick:g,show:h}=this.props,{r:a}=this.state,e=null;a&&(e=(0,N.jsx)(D.Cd,{r:a+1,cx:a+2,cy:a+2,fill:"transparent"}));var b=(0,A.Z)((0,A.Z)({},R.container),f);return h||(b=(0,A.Z)((0,A.Z)({},b),R.hide)),(0,N.jsxs)(D.ZA,{className:"cance-button",refCb:this.handleEl,style:b,transform:c&&d?"translate("+(c-a)+", "+(d-a)+")":null,onClick:g,children:[(0,N.jsx)(P,{style:R.cancel,transform:"scale(0.8)"}),e]})}}]),a}(b.PureComponent);(0,c.Z)(f,"defaultProps",{show:!0});let Q=f;var R={container:{cursor:"pointer"},cancel:{fill:"#f00"},circle:{strokeLinejoin:"round",strokeWidth:15,strokeOpacity:1,fill:"none"},hide:{opacity:0}},m=function(b){(0,y.Z)(a,b);var c=(0,z.Z)(a);function a(){return(0,v.Z)(this,a),c.apply(this,arguments)}return(0,w.Z)(a,[{key:"getEl",value:function(){console.error("You need implement getEl()")}}]),a}(b.Component);let d=m;var S=Object.keys,T=function(b){var{children:c,x:d,y:e,width:a}=b;return(0,N.jsxs)(D.ZA,{transform:"translate(0, 20)",style:V.boxGroupHeader,children:[(0,N.jsx)(D.UL,{x:"0",y:"-20",rx:"5",width:a,height:"20",fill:"#aaa"}),(0,N.jsx)(D.xv,{y:"-5",alignCenter:!0,parentWidth:a,fill:"#fff",children:c})]})},n=function(d){(0,y.Z)(a,d);var e=(0,z.Z)(a);function a(){var b;(0,v.Z)(this,a);for(var f=arguments.length,g=new Array(f),d=0;d<f;d++)g[d]=arguments[d];return b=e.call.apply(e,[this].concat(g)),(0,c.Z)((0,x.Z)(b),"state",{rectW:100,rectH:100,boxsPos:{}}),(0,c.Z)((0,x.Z)(b),"childrenEl",{}),b}return(0,w.Z)(a,[{key:"getEl",value:function(){return this.el}},{key:"update",value:function(b){var g=this,c=15,d={},e=[0],{zoomK:f}=this.props;S(this.childrenEl).forEach(function(a){var i=g.childrenEl[a].getEl(),{w:b,h:h}=(0,G.ZP)(i);c+=h/f,e.push(b),d[a]={y:c,w:b,h:h}});var a=Math.max.apply(Math,e);a>0&&!b.maxW&&this.setState({maxW:a,rectW:a/f+10,rectH:c+5,boxsPos:d})}},{key:"componentDidMount",value:function(){this.update({})}},{key:"componentDidUpdate",value:function(b,a,c){this.update(a)}},{key:"render",value:function(){var f,g,u=this,{id:k,className:l,showConnectPoint:v,text:m,children:n,isInsideVector:o,boxGroupAbsX:h,boxGroupAbsY:i,onGetEl:w,onMouseEnter:p,onMouseLeave:q,onDel:x,onEdit:r,zoomK:y,style:s}=this.props,{rectW:a,rectH:c,boxsPos:z}=this.state,d=(0,A.Z)((0,A.Z)({},V.container),s),j={},e={};o(this.el)?(f="g",g="g",j.transform="translate("+h+", "+i+")"):(f="i",g="svg",d.transform="translate("+h+"px, "+i+"px)",d.width=a+10,d.height=c+10,e.width=a,e.height=c,e.viewBox="0 0 "+a+" "+c);var t=(0,N.jsx)(Q,{x:-10,y:-10,onClick:function(a){a.preventDefault(),x(a)}});return(0,N.jsx)(D.kJ,(0,A.Z)((0,A.Z)({},j),{},{className:l,atom:f,style:d,"data-id":k,refCb:function(a){return u.el=w(a)},children:(0,N.jsxs)(D.ZA,(0,A.Z)((0,A.Z)({atom:g},e),{},{style:V.group,children:[(0,N.jsx)(D.UL,{style:V.rect,rx:"5",ry:"5",width:a,height:c,onMouseEnter:p,onMouseLeave:q,onClick:r}),(0,N.jsx)(T,{width:a,children:m}),t,b.Children.map(n,function(d,c){return(0,b.cloneElement)(d,{key:c,x:5,y:(0,E.ZP)(z,[c,"y"],0),width:a,ref:function(a){return u.childrenEl[c]=a},onClick:r})})]}))}))}}]),a}(d);let U=n;var V={container:{position:"absolute",pointerEvents:"all"},group:{overflow:"visible"},rect:{stroke:"#999",fill:"#fff"},boxGroupHeader:{pointerEvents:"none"}},W=["connectPointComponent","text","x","y","width"],o=function(b){(0,y.Z)(a,b);var d=(0,z.Z)(a);function a(){var e;(0,v.Z)(this,a);for(var f=arguments.length,g=new Array(f),b=0;b<f;b++)g[b]=arguments[b];return e=d.call.apply(d,[this].concat(g)),(0,c.Z)((0,x.Z)(e),"handleEl",function(a){a&&(e.el=a)}),e}return(0,w.Z)(a,[{key:"getEl",value:function(){return this.el}},{key:"render",value:function(){var a=this.props,{connectPointComponent:b,text:c,x:d,y:e,width:f}=a,g=(0,B.Z)(a,W),h=[b({key:"left",cy:-5,cx:-12}),b({key:"right",cy:-5,cx:f+2})];return(0,N.jsxs)(D.ZA,{transform:"translate("+d+", "+e+")",children:[(0,N.jsx)(D.xv,(0,A.Z)((0,A.Z)({},g),{},{refCb:this.handleEl,children:c})),h]})}}]),a}(d);let X=o;var Y=["x","y","name","text","host","onEdit","onDel","onDragEnd","onWillDrag","children"],Z=1,p=function(d){(0,y.Z)(a,d);var e=(0,z.Z)(a);function a(d){var b;return(0,v.Z)(this,a),b=e.call(this,d),(0,c.Z)((0,x.Z)(b),"state",{absX:0,absY:0}),(0,c.Z)((0,x.Z)(b),"boxNameInvertMap",{}),(0,c.Z)((0,x.Z)(b),"boxs",{}),(0,c.Z)((0,x.Z)(b),"move",function(a,c){b._mount&&(b.el.setXY(a,c),b.setState({absX:a,absY:c}))}),(0,c.Z)((0,x.Z)(b),"handleDrag",function(a){var{absX:c,absY:d}=a,e={boxGroup:(0,x.Z)(b)};!1!==(0,H.ZP)(b.props.onWillDrag,[e])&&b.move(c,d)}),(0,c.Z)((0,x.Z)(b),"handleDragEnd",function(a){var{absX:c,absY:d}=b.state;if(b.lastX!==c&&b.lastY!==d){b.lastX=c,b.lastY=d;var{onDragEnd:e}=b.props;a.boxGroup=(0,x.Z)(b),(0,H.ZP)(e,[a])}}),(0,c.Z)((0,x.Z)(b),"handleEdit",function(a){a.stopPropagation&&a.stopPropagation();var{onEdit:c,name:d}=b.props;c(d,(0,x.Z)(b))}),(0,c.Z)((0,x.Z)(b),"handleDel",function(a){a.stopPropagation&&a.stopPropagation();var{onDel:c,name:d}=b.props;c(d)}),(0,c.Z)((0,x.Z)(b),"handleSetRef",function(a){a&&(b.el=a)}),(0,c.Z)((0,x.Z)(b),"handleGetEl",function(){return b.getEl()}),b.id=Z,Z++,b}return(0,w.Z)(a,[{key:"addBox",value:function(a){a&&(this.boxs[a.getId()]=a)}},{key:"getXY",value:function(){var{absX:a,absY:b}=this.state;return{x:a,y:b}}},{key:"getBoxIdByName",value:function(a){return(0,E.ZP)(this.boxNameInvertMap,[a])}},{key:"getBox",value:function(a){return(0,E.ZP)(this.boxs,[a])}},{key:"getWH",value:function(){if(!this.getEl())return{width:1,height:1};var{width:a,height:b}=(0,G.ZP)(this.getEl());return{width:a,height:b}}},{key:"getName",value:function(){return this.props.name}},{key:"getId",value:function(){return this.id}},{key:"getEl",value:function(){if(this.el)return this.el.getEl()}},{key:"setBoxNameInvertMap",value:function(a,b){this.boxNameInvertMap[b]=a}},{key:"componentDidMount",value:function(){this._mount=!0;var{name:c,host:d,x:e,y:f}=this.props,{x:a,y:b}=d.getLazyMoveByName(c)||{};null==a&&(a=e),null==b&&(b=f),(a||b)&&(this.lastX=a,this.lastY=b,this.move(a,b))}},{key:"componentWillUnmount",value:function(){this._mount=!1}},{key:"render",value:function(){var l=this,c=this.props,{x:m,y:n,name:d,text:e,host:a,onEdit:o,onDel:p,onDragEnd:q,onWillDrag:r,children:f}=c,g=(0,B.Z)(c,Y),{rectW:s,rectH:t,boxsPos:u,absX:h,absY:i}=this.state,j=(0,C.J_)(a.getBoxGroupComponent(d)),k=b.Children.map(f,function(a){return(0,b.cloneElement)(a,{boxGroupId:l.id,boxGroupAbsX:h,boxGroupAbsY:i})});return(0,N.jsx)(D.lk,{keepLastAbsXY:!0,ref:this.handleSetRef,zoom:a.getTransform,onDrag:this.handleDrag,onGetEl:this.handleGetEl,onDragEnd:this.handleDragEnd,component:j((0,A.Z)((0,A.Z)({},g),{},{id:this.id,isInsideVector:a.insideVector,onEdit:this.handleEdit,onDel:this.handleDel,className:"box-group",boxGroupAbsX:h,boxGroupAbsY:i,zoomK:a.getZoomK(),text:e||d}),k)})}}]),a}(b.Component);let $=p;var _=a(39),aa=["style","onGetEl"],q=function(b){(0,y.Z)(a,b);var d=(0,z.Z)(a);function a(){var e;(0,v.Z)(this,a);for(var f=arguments.length,g=new Array(f),b=0;b<f;b++)g[b]=arguments[b];return e=d.call.apply(d,[this].concat(g)),(0,c.Z)((0,x.Z)(e),"handleEl",function(a){var{onGetEl:b}=e.props;a&&(b(a),e.el=a)}),e}return(0,w.Z)(a,[{key:"getEl",value:function(){if(this.el)return this.el}},{key:"render",value:function(){var b=this.props,{style:d,onGetEl:f}=b,c=(0,B.Z)(b,aa),e=c["data-is-show"],a=(0,A.Z)((0,A.Z)({},d),ab.container);return e&&(a=(0,A.Z)((0,A.Z)({},a),ab.visible)),(0,N.jsx)(D.Cd,(0,A.Z)((0,A.Z)({style:a,fill:"#3c5d9b",fillOpacity:"0.4",r:"5"},c),{},{refCb:this.handleEl}))}}]),a}(d),ab={container:{visibility:"hidden",cursor:"move"},visible:{visibility:"visible"}},ac=["host","boxId","boxGroupId","boxGroupAbsX","boxGroupAbsY","onDragStart","onMount","onWillDrag","show","component"],ad=1,ae=Object.keys,g=function(b){(0,y.Z)(a,b);var d=(0,z.Z)(a);function a(e){var b;return(0,v.Z)(this,a),b=d.call(this,e),(0,c.Z)((0,x.Z)(b),"state",{start:null,absX:0,absY:0}),(0,c.Z)((0,x.Z)(b),"start",!1),(0,c.Z)((0,x.Z)(b),"dnd",null),(0,c.Z)((0,x.Z)(b),"lines",{}),(0,c.Z)((0,x.Z)(b),"getEl",function(){if(b.dnd)return(0,H.ZP)(b.dnd.getEl,null,b.dnd)}),(0,c.Z)((0,x.Z)(b),"handleDragStart",function(d){var{start:a}=d,{onDragStart:e,host:c}=b.props;(0,H.ZP)(e,[!0]);var f=c.oConn.addLine();a.center=b.getCenter(),a.lineId=f,b.setState({start:a}),c.setConnectStartPoint((0,x.Z)(b))}),(0,c.Z)((0,x.Z)(b),"handleDrag",function(j){var e,{host:a,onWillDrag:n}=b.props;if(!1!==(0,H.ZP)(n,[{connectPoint:(0,x.Z)(b)}])){var{absX:o,absY:p,sourceEvent:q}=j;b.setState({absX:o,absY:p});var r=a.getVectorEl(),g=(0,G.Jz)(q,r),{lineId:k,center:l}=b.state.start,f=j.getClientPointerTarget();if(f){var c=f.getAttribute("data-id"),d=f.getAttribute("data-group");if(!c&&!d){var h=(0,_.J_)(f,"[data-id]");h&&(c=h.getAttribute("data-id"),d=h.getAttribute("data-group"))}if(c&&d){var m=a.getBox(c,d);if(!m)return console.error("[ConnectPoint] target-box not found",{targetId:c,targetGroup:d});var i=m.getConnectPoint(l,g);i&&(e=i.getCenter(),a.setConnectEndPoint(i))}}e||(a.setConnectEndPoint(null),e=a.applyXY(g[0],g[1])),a.oConn.setLineStart(k,l),a.oConn.setLineEnd(k,e)}}),(0,c.Z)((0,x.Z)(b),"handleDragEnd",function(h){var{lineId:d}=b.state.start,{onDragStart:g,host:a}=b.props,e=a.oConn,c=a.getConnectEndPoint(),f=!1;c&&(f=e.addConnected(d,(0,x.Z)(b),c)),b.setState({start:null}),a.setConnectStartPoint(null),c&&f||e.deleteLine(d),(0,H.ZP)(g,[!1])}),(0,c.Z)((0,x.Z)(b),"handleEl",function(a){a&&(b.dnd=a)}),(0,c.Z)((0,x.Z)(b),"handleMouseEnter",function(){b.setState({isHover:!0})}),(0,c.Z)((0,x.Z)(b),"handleMouseLeave",function(){b.setState({isHover:!1})}),b.id=ad,ad++,b}return(0,w.Z)(a,[{key:"setLine",value:function(a,b){this.lines[a]=b}},{key:"delLine",value:function(a){delete this.lines[a]}},{key:"getVectorCenter",value:function(a,c){var b=a.getBBox(),{left:h,top:i,width:d,height:e}=a.getBoundingClientRect(),f=d/2+b.x,g=e/2+b.y;return c.applyXY(f,g,a)}},{key:"getHtmlCenter",value:function(a,b){var{left:d,top:e,width:f,height:g}=a&&a.getBoundingClientRect?a.getBoundingClientRect():{left:0,top:0,width:0,height:0},h=b.getVectorEl(),c=(0,G.zN)(h)(f/2+d,g/2+e);return b.applyXY(c.x,c.y)}},{key:"getCenter",value:function(){var c,{host:a}=this.props,b=this.getEl();return a.insideVector(b)?c=this.getVectorCenter(b,a):a.insideHtml(b)&&(c=this.getHtmlCenter(b,a)),c}},{key:"getBox",value:function(){var{host:a,boxId:b,boxGroupId:c}=this.props;return a.getBox(b,c)}},{key:"getBoxName",value:function(){return this.getBox().getName()}},{key:"getBoxGroupName",value:function(){return this.getBox().getBoxGroup().getName()}},{key:"getId",value:function(){return this.id}},{key:"isShow",value:function(){var{show:a}=this.props,b=this.state.isHover;return!a&&(this.state.start&&(a=!0),ae(this.lines).length&&(a=!0)),b||a}},{key:"componentDidMount",value:function(){var{onMount:a}=this.props;a(this)}},{key:"componentWillUnmount",value:function(){var a=ae(this.lines);if(a.length){var{host:b}=this.props;a.forEach(function(a){return b.oConn.deleteLine(a)})}}},{key:"componentDidUpdate",value:function(b,g,h){var i=this,{boxGroupAbsX:c,boxGroupAbsY:d}=this.props,{boxGroupAbsX:e,boxGroupAbsY:f}=b||{};if(c!==e||d!==f){var a=ae(this.lines);if(a.length){var{host:j}=this.props,k=this.getCenter();a.forEach(function(a){"from"===i.lines[a]?j.oConn.setLineStart(a,k):j.oConn.setLineEnd(a,k)})}}}},{key:"render",value:function(){var a=this.props,{host:d,boxId:e,boxGroupId:f,boxGroupAbsX:g,boxGroupAbsY:h,onDragStart:i,onMount:j,onWillDrag:k,show:l,component:b}=a,c=(0,B.Z)(a,ac),{absX:m,absY:n}=this.state;return(0,N.jsx)(D.lk,(0,A.Z)((0,A.Z)({},c),{},{onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,"data-id":this.id,"data-is-show":this.isShow(),onDragStart:this.handleDragStart,onDragEnd:this.handleDragEnd,onDrag:this.handleDrag,ref:this.handleEl,component:b}))}}]),a}(b.Component);(0,c.Z)(g,"defaultProps",{component:q});let af=g;var ag=["host","boxGroupAbsX","boxGroupAbsY","boxGroupId","boxGroupName","boxComponent","text"],ah=1,ai=Object.keys,r=function(b){(0,y.Z)(a,b);var d=(0,z.Z)(a);function a(e){var b;return(0,v.Z)(this,a),b=d.call(this,e),(0,c.Z)((0,x.Z)(b),"isConnectPointDrag",!1),(0,c.Z)((0,x.Z)(b),"points",{}),(0,c.Z)((0,x.Z)(b),"hoverTimer",!1),(0,c.Z)((0,x.Z)(b),"state",{showConnectPoint:!1}),(0,c.Z)((0,x.Z)(b),"addPoint",function(a){a&&(b.points[a.getId()]=a)}),(0,c.Z)((0,x.Z)(b),"handleMouseEnter",function(){b.clearHoverTimer(),b.setState({showConnectPoint:!0})}),(0,c.Z)((0,x.Z)(b),"handleMouseLeave",function(){var a=b.getFromBoxId();a&&b.getId()!==a?b.setState({showConnectPoint:!1}):b.isConnectPointDrag||(b.hoverTimer=setTimeout(function(){b.setState({showConnectPoint:!1})},1e3))}),(0,c.Z)((0,x.Z)(b),"handlePointDrag",function(a){b.isConnectPointDrag=a}),(0,c.Z)((0,x.Z)(b),"handleEl",function(a){a&&(b.elRef=a)}),b.id=ah,ah++,b}return(0,w.Z)(a,[{key:"getFromBoxId",value:function(){var{host:b}=this.props,a=b.getConnectStartPoint();if(a)return a.getBox().getId()}},{key:"getBoxGroup",value:function(){var{host:a,boxGroupId:b}=this.props;return a.getBoxGroup(b)}},{key:"getBoxGroupId",value:function(){return this.props.boxGroupId}},{key:"getName",value:function(){var{name:a}=this.props;return 0===a||a||(a=this.getId()),a}},{key:"getId",value:function(){return this.id}},{key:"getRef",value:function(){return this.elRef}},{key:"getEl",value:function(){var a=this.getRef();if(a&&a.getEl)return a.getEl()}},{key:"getEdge",value:function(){var{host:b}=this.props,a=this.getEl(),{right:c,bottom:d}=a&&a.getBoundingClientRect?a.getBoundingClientRect():{right:0,bottom:0};return b.applyXY(c,d)}},{key:"getRecentPoint",value:function(c){var d=this,a=[],b={};return ai(this.points).forEach(function(h){var e=d.points[h],f=e.getCenter();if(f){var g=(0,D.Sp)(c,f);a.push(g),b[g]=e}}),b[Math.min.apply(Math,a)]}},{key:"getConnectPoint",value:function(b,c){var a=this.getRef();return a&&a.getConnectPoint?a.getConnectPoint(b,c):this.getRecentPoint(b)}},{key:"getFromPoint",value:function(){var a=this.getRef();return a&&a.getFromPoint?a.getFromPoint():this.getRecentPoint(this.getEdge())}},{key:"getToPoint",value:function(){var a=this.getRef();return a&&a.getToPoint?a.getToPoint():this.getRecentPoint({x:0,y:0})}},{key:"getPoint",value:function(a){return this.points[a]}},{key:"clearHoverTimer",value:function(){this.hoverTimer&&(clearTimeout(this.hoverTimer),this.hoverTimer=!1)}},{key:"componentDidMount",value:function(){var{host:a}=this.props;a.addBox(this)}},{key:"componentWillUnmount",value:function(){this.clearHoverTimer()}},{key:"render",value:function(){var a=this.props,{host:b,boxGroupAbsX:e,boxGroupAbsY:f,boxGroupId:c,boxGroupName:g,boxComponent:h,text:i}=a,j=(0,B.Z)(a,ag),d=this.getName(),{showConnectPoint:k}=this.state,l=(0,C.J_)((0,N.jsx)(af,{boxId:this.id,boxGroupId:c,boxGroupAbsX:e,boxGroupAbsY:f,show:k,host:b,onDragStart:this.handlePointDrag,onMount:this.addPoint})),m=(0,C.J_)(h||b.getBoxComponent(d,g));return m((0,A.Z)((0,A.Z)({},j),{},{connectPointComponent:l,ref:this.handleEl,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,"data-id":this.id,"data-group":c,text:i||d}))}}]),a}(b.Component);let aj=r;var ak=["id","start","end","from","to","isHover","onMouseEnter","onMouseLeave","onDeleteButtonClick","onClick","curve"],h=function(b){(0,y.Z)(a,b);var d=(0,z.Z)(a);function a(){var b;(0,v.Z)(this,a);for(var f=arguments.length,g=new Array(f),e=0;e<f;e++)g[e]=arguments[e];return b=d.call.apply(d,[this].concat(g)),(0,c.Z)((0,x.Z)(b),"handleEl",function(a){b.el=a}),(0,c.Z)((0,x.Z)(b),"handleLineEl",function(a){a&&(b.lineEl=a)}),b}return(0,w.Z)(a,[{key:"getEl",value:function(){return this.el}},{key:"getLinePoint",value:function(b,e){var a=this.lineEl;if(a){var c=a.getTotalLength(),d=Math.floor(e*c/100),f=b>d?d:b;if(c)return a.getPointAtLength(f)}}},{key:"render",value:function(){var b=this.props,{id:h,start:c,end:i,from:j,to:k,isHover:l,onMouseEnter:m,onMouseLeave:n,onDeleteButtonClick:o,onClick:p,curve:q}=b,r=(0,B.Z)(b,ak),d=null,e=null,a=al.area,f=!1,{x:s,y:t}=this.getLinePoint(50,50)||c||{},g=(0,C.J_)((0,N.jsx)(D.x1,{start:c,end:i,curve:q}));return j&&k&&(l&&(a=(0,A.Z)((0,A.Z)({},a),al.hover),f=!0),e=(0,N.jsx)(Q,{x:s,y:t,onClick:o,show:f}),d=g({onClick:p,style:a,className:"area"})),(0,N.jsxs)(D.ZA,{name:h,onMouseEnter:m,onMouseLeave:n,refCb:this.handleEl,children:[g((0,A.Z)((0,A.Z)({},r),{},{refCb:this.handleLineEl,className:"line",style:al.line})),d,e]})}}]),a}(d);(0,c.Z)(h,"defaultProps",{markerEnd:"url(#marker-arrow-head)",curve:!0});var al={line:{stroke:"#bbb",strokeWidth:1.5,fill:"none"},area:{strokeLinecap:"round",stroke:"#999",strokeWidth:15,strokeOpacity:0,fill:"none",cursor:"default"},hover:{strokeOpacity:".1"}},am=["start","end","props","init","host","component"],e=(0,b.forwardRef)(function(a,e){var{start:c,end:d,props:m,init:n,host:o,component:f}=a,g=(0,B.Z)(a,am),[h,p]=(0,b.useState)(),[i,j]=(0,b.useState)(c),[k,l]=(0,b.useState)(d),q={getId:function(){return a.id},getFromTo:function(){return{from:a.from,to:a.to}},getIsHover:function(){return h},setStart:j,setEnd:l};return(0,b.useImperativeHandle)(e,function(){return q},[]),(0,b.useEffect)(function(){j(c)},[c]),(0,b.useEffect)(function(){l(d)},[d]),(0,b.useEffect)(function(){var a=q.getId();o.oConn.setLineObj(a,q)},[]),(0,C.J_)(f)((0,A.Z)((0,A.Z)({},g),{},{start:i,end:k,isHover:h,onClick:function(b){b.preventDefault();var a=q.getId();o.handleLineEdit({ref:q,lineId:a,lineData:o.oConn.getLine(a)})},onDeleteButtonClick:function(b){b.preventDefault();var a=q.getId();o.handleLineDel({ref:q,lineId:a,lineData:o.oConn.getLine(a)})},onMouseEnter:function(a){o.getConnectStartPoint()||p(!0)},onMouseLeave:function(a){o.getConnectStartPoint()||p(!1)}}))});e.displayName="UmlLine",e.defaultProps={component:h};let an=e;var ao=Object.keys,i=(0,b.forwardRef)(function(e,f){var a,{lineDefaultProps:h,host:i}=e,[c,g]=(0,b.useState)([]),j=(0,b.useRef)([]),k=(0,b.useRef)(),l={setLines:g,getLines:function(){return k.current},addUpdateCb:function(a){j.current.push(a)}};(0,b.useImperativeHandle)(f,function(){return l},[]),(0,b.useEffect)(function(){k.current=c,setTimeout(function(){j.current.forEach(function(a){return(0,H.ZP)(a)}),j.current=[]})},[c]);var d=[];return ao(c).forEach(function(e){var g=c[e],j=i.oConn.getIsHover(e),f=(0,b.createElement)(an,(0,A.Z)((0,A.Z)((0,A.Z)({},h),g),{},{id:e,key:e,host:i}));j?a=f:d.push(f)}),a&&d.push(a),d});i.displayName="LineList";let ap=i;var aq=a(69),ar=1,as=Object.keys,s=function(){function a(b){(0,v.Z)(this,a),(0,c.Z)(this,"lineTimer",null),(0,c.Z)(this,"connects",{}),(0,c.Z)(this,"queue",null),(0,c.Z)(this,"updateCbQueue",[]),(0,c.Z)(this,"host",null),(0,c.Z)(this,"lineObjs",{}),this.host=b.host}return(0,w.Z)(a,[{key:"getLine",value:function(a){return(0,E.ZP)(this.host.getLines(),[a])}},{key:"getLineObj",value:function(a){return this.lineObjs[a]}},{key:"getIsHover",value:function(b){var a=this.lineObjs[b];if(a)return a.getIsHover()}},{key:"setLineObj",value:function(a,b){this.lineObjs[a]=b}},{key:"setLineStart",value:function(b,c){var a=this.lineObjs[b];a&&a.setStart(c)}},{key:"setLineEnd",value:function(b,c){var a=this.lineObjs[b];a&&a.setEnd(c)}},{key:"addLine",value:function(b){var a="line-"+ar;return ar++,this.setState(function(c){return c[a]={props:b},c}),a}},{key:"updateLine",value:function(a,b){this.setState(function(c){return c[a]=(0,A.Z)((0,A.Z)({},c[a]),b),c})}},{key:"deleteLine",value:function(a){var b=this,c={};this.setState(function(g){var f=g[a];if(f){c.line=f;var d=f.from,e=f.to;if(d&&(d.delLine(a),c.from=d.getBoxGroupName()),e&&(e.delLine(a),c.to=e.getBoxGroupName()),d&&e){var{mergeId:h,invertMergeId:i}=b.getConnectIds(d,e);delete b.connects[h],delete b.connects[i]}delete g[a]}return g})}},{key:"getConnectIds",value:function(a,b){if(!a||!b)return console.warn("Can not get point type for 'from' or 'to'.",{from:a,to:b}),{};var c=a.getBox().getId(),d=b.getBox().getId();return{fromBoxId:c,toBoxId:d,mergeId:c+"-"+d,invertMergeId:d+"-"+c}}},{key:"getConnectNames",value:function(a,b){var g=this.getConnectIds(a,b),c=a.getBox(),d=b.getBox(),e=c.getBoxGroup(),f=d.getBoxGroup(),h=c.getName(),i=e.getName(),j=e.getId(),k=d.getName(),l=f.getName(),m=f.getId();return(0,A.Z)((0,A.Z)({},g),{},{fromBoxName:h,toBoxName:k,fromBoxGroupName:i,toBoxGroupName:l,fromBoxGroupId:j,toBoxGroupId:m})}},{key:"getConnects",value:function(){var c=this,a=this.connects,d=this.host.getLines(),b=[];return as(a).forEach(function(i){var e=a[i],{from:f,to:g}=d[e];if(f&&g){var h=c.getConnectNames(f,g);h.id=e,b.push(h)}}),b}},{key:"addConnected",value:function(a,b,c,i){var{fromBoxId:j,toBoxId:k,mergeId:f,invertMergeId:l}=this.getConnectIds(b,c),d=this.connects;if((0,E.ZP)(d,[f])||(0,E.ZP)(d,[l])||j===k)return!1;var g=this.host,e=(0,aq.HO)({from:b,to:c,init:i,start:b.getCenter(),end:c.getCenter()}),h=g.handleConnWillAdd((0,A.Z)((0,A.Z)({},e),{},{lineId:a}));return h&&(d[f]=a,b.setLine(a,"from"),c.setLine(a,"to"),this.updateLine(a,e),g.handleConnAdd((0,A.Z)((0,A.Z)({},e),{},{lineId:a}))),h}},{key:"clearTimeout",value:function(b){function a(){return b.apply(this,arguments)}return a.toString=function(){return b.toString()},a}(function(){this.lineTimer&&(clearTimeout(this.lineTimer),this.lineTimer=!1)})},{key:"setState",value:function(a,b,c){var d=this;this.clearTimeout(),a&&(this.queue=a(this.queue||this.host.getLines()||[])),b&&this.updateCbQueue.push(b),this.lineTimer=setTimeout(function(){var a,b,c=d.host;c.mount&&(null===(a=c.lineList)|| void 0===a||a.setLines((0,A.Z)({},d.queue)),null===(b=c.lineList)|| void 0===b||b.addUpdateCb(function(){d.queue=null,d.updateCbQueue.forEach(function(a){return a()}),d.updateCbQueue=[]}))},null!=c?c:10)}},{key:"getUniqueFromTo",value:function(){var a=this.getConnects(),b={},c=function(a,c){var d=[a,c].sort();b[d[0]+"-"+d[1]]=[a,c]};return a.forEach(function(a){c(a.fromBoxGroupId,a.toBoxGroupId)}),b}}]),a}();let at=s;var au=["d3OnLoad"],av=["autoArrange","arrowHeadComponent","disableDagreWorker","data","uniqueBoxGroupNameLocator","boxNameLocator","boxsLocator","boxGroupsLocator","boxGroupXLocator","boxGroupYLocator","connsLocator","connFromBoxGroupLocator","connToBoxGroupLocator","connFromBoxLocator","connToBoxLocator","children","editToCenter","editToCenterCb","editToCenterDelay","onAdd","onBoxWillDrag","onEdit","onDel","onDragEnd","onConnAdd","onConnWillAdd","onLineEdit","onLineDel","onLoad","onGetBoxGroupComponent","onGetBoxComponent","onZoom","scaleExtent","lineDefaultProps","style"],aw={current:null},ax={current:null},ay={},az=function(a,b){return function(c){a.current=c,a.current.addEventListener("message",function(a){var b=(null==a?void 0:a.data)||{};if("ready"===b.type);else{var{queueId:c,nextXY:d}=b;ay[c].callback(d),delete ay[c]}}),aA(b,a)}},aA=function(b,c){var a=ay[b];a&&c.current.postMessage({queueId:b,conns:a.conns,nodes:a.nodes})},aB=function(b){aw.current?aA(b,aw):a.e(32).then(a.bind(a,461)).then(function(a){return az(aw,b)((0,E.MV)(a))})},aC=function(b){ax.current?aA(b,ax):a.e(52).then(a.bind(a,462)).then(function(a){az(ax,b)(new E.MV(a)())})},t=(0,b.forwardRef)(function(a,c){var{d3OnLoad:d}=a,e=(0,B.Z)(a,au);(0,K.J)(d);var[f,g]=(0,b.useState)(),m={setTransform:g};(0,b.useImperativeHandle)(c,function(){return m},[]);var{k:h,x:i,y:j}=f||{},k="translate("+(0,I.Hq)(i)+"px, "+(0,I.Hq)(j)+"px) scale("+h+")",l=(0,A.Z)((0,A.Z)({},aE.htmlGraph),{},{transform:k});return(0,N.jsx)(C.iX,(0,A.Z)((0,A.Z)({},e),{},{style:l,className:"html-graph"}))});t.displayName="HTMLGraph";var j=function(b){(0,y.Z)(a,b);var d=(0,z.Z)(a);function a(){var b;(0,v.Z)(this,a);for(var f=arguments.length,g=new Array(f),e=0;e<f;e++)g[e]=arguments[e];return b=d.call.apply(d,[this].concat(g)),(0,c.Z)((0,x.Z)(b),"boxGroupNameInvertMap",{}),(0,c.Z)((0,x.Z)(b),"boxGroupMap",{}),(0,c.Z)((0,x.Z)(b),"boxQueue",{}),(0,c.Z)((0,x.Z)(b),"startPoint",null),(0,c.Z)((0,x.Z)(b),"endPoint",null),(0,c.Z)((0,x.Z)(b),"lazyMove",{}),(0,c.Z)((0,x.Z)(b),"oConn",void 0),(0,c.Z)((0,x.Z)(b),"mount",!1),(0,c.Z)((0,x.Z)(b),"addBoxGroup",function(a){if(a){var c=a.getId(),d=a.getName();b.boxGroupNameInvertMap[d]=c,b.boxGroupMap[c]=a,(0,J.tW)(b.boxQueue[c]||{}).forEach(function(a){var d=b.boxQueue[c][a];b.addBox(d)})}}),(0,c.Z)((0,x.Z)(b),"getTransform",function(){if(b.zoom)return b.zoom.getTransform()}),(0,c.Z)((0,x.Z)(b),"getZoomK",function(){var{k:a}=b.getTransform()||{};return a||1}),(0,c.Z)((0,x.Z)(b),"edit",function(a,c){var{onEdit:d,editToCenter:e,editToCenterCb:g,editToCenterDelay:f}=b.props;b.zoom.disable(),e&&setTimeout(function(){return b.center(c,g)},f),(0,H.ZP)(d,[a,c]),setTimeout(function(){return b.zoom.enable()},1500)}),(0,c.Z)((0,x.Z)(b),"del",function(a){var{onDel:c}=b.props;(0,H.ZP)(c,[a])}),(0,c.Z)((0,x.Z)(b),"insideHtml",function(a){return b.html&&b.html.contains(a)}),(0,c.Z)((0,x.Z)(b),"insideVector",function(a){return b.vector&&b.vector.contains(a)}),(0,c.Z)((0,x.Z)(b),"isOnGraph",function(d){var a=(0,G.ZP)(b.zoomEl);if(!d)return!1;var c=(0,G.ZP)(d),e=c.bottom<=a.top,f=c.left>=a.right,g=c.top>=a.bottom,h=c.right<=a.left;return!(e||f||g||h)}),(0,c.Z)((0,x.Z)(b),"applyXY",function(c,d,a){a||(a=b.getVectorEl());var e=b.getTransform(),{x:f,y:g}=(0,G.jL)(a,e)(c,d);return{x:f,y:g}}),(0,c.Z)((0,x.Z)(b),"handleD3Load",function(){return setTimeout(function(){return b.syncPropConnects()})}),(0,c.Z)((0,x.Z)(b),"handleBoxGroupDragEnd",function(a){var{onDragEnd:c}=b.props;(0,H.ZP)(c,[a])}),(0,c.Z)((0,x.Z)(b),"handleZoom",function(a){var{onZoom:c}=b.props;b.htmlObj.setTransform(a.transform),(0,H.ZP)(c,[a])}),(0,c.Z)((0,x.Z)(b),"handleLineEdit",function(a){(0,H.ZP)(b.props.onLineEdit,[a])}),(0,c.Z)((0,x.Z)(b),"handleLineDel",function(a){!1!==(0,H.ZP)(b.props.onLineDel,[a])&&b.oConn.deleteLine(a.lineId)}),(0,c.Z)((0,x.Z)(b),"handleConnAdd",function(a){var{onConnAdd:e}=b.props,c=(0,E.ZP)(a,["from"]).getBoxGroupName(),d=(0,E.ZP)(a,["to"]).getBoxGroupName();c&&d&&(a.fromTo={from:c,to:d}),(0,H.ZP)(e,[a])}),(0,c.Z)((0,x.Z)(b),"handleConnWillAdd",function(e){var{onConnWillAdd:a}=b.props,c=!0;if(a){var d=(0,H.ZP)(a,[e]);J.i_===typeof d?console.warn("onConnWillAdd should not return undefined."):c=d}return c}),(0,c.Z)((0,x.Z)(b),"handleLoad",function(){b.isInit||(b.isInit=!0,(0,H.ZP)(b.props.onLoad,[(0,x.Z)(b)]))}),(0,c.Z)((0,x.Z)(b),"handleSetLineListRef",function(a){b.lineList=a}),(0,c.Z)((0,x.Z)(b),"handleZoomRef",function(a){a&&(b.zoom=a)}),(0,c.Z)((0,x.Z)(b),"handleSetZoomEl",function(a){b.zoomEl=a}),(0,c.Z)((0,x.Z)(b),"handleGetZoomEl",function(){return b.zoomEl}),(0,c.Z)((0,x.Z)(b),"handleSetVector",function(a){b.vector=a}),(0,c.Z)((0,x.Z)(b),"handleSetHtmlEl",function(a){b.html=a}),(0,c.Z)((0,x.Z)(b),"handleSetHtmlObj",function(a){b.htmlObj=a}),b}return(0,w.Z)(a,[{key:"addLazyMoveWithMouseEvent",value:function(j,k,a){var b=this.getVectorEl();if(b){var{0:c,1:d}=(0,G.Jz)(k,b);if(a){var e=this.getZoomK(),{fromX:f,fromY:g}=(0,E.ZP)(a,["start"],{});f&&g&&(c-=f*e,d-=g*e)}var{x:h,y:i}=this.applyXY(c,d);return this.addLazyMove(j,h,i),{x:h,y:i}}}},{key:"addLazyMove",value:function(a,b,c){this.lazyMove[a]={x:b,y:c}}},{key:"add",value:function(a){var{onAdd:b}=this.props;(0,H.ZP)(b,[a])}},{key:"addBoxQueue",value:function(a){if(a){var b=a.getName(),c=a.getBoxGroupId();(0,F.Z)(this.boxQueue,[c,b],a)}}},{key:"addBox",value:function(a){if(a){var b=a.getBoxGroup();if(!b){this.addBoxQueue(a);return}b.addBox(a);var d=b.getId(),c=a.getName(),e=a.getId();return b.setBoxNameInvertMap(e,c),(0,E.ZP)(this.boxQueue,[d,c])&&delete this.boxQueue[d][c],!0}}},{key:"getLazyMoveByName",value:function(a){var b=(0,A.Z)({},this.lazyMove[a]);if(b)return delete this.lazyMove[a],b}},{key:"getLines",value:function(){var a;return null===(a=this.lineList)|| void 0===a?void 0:a.getLines()}},{key:"getBox",value:function(b,c){var a=(0,E.ZP)(this.boxGroupMap,[c]);if(a)return a.getBox(b)}},{key:"getBoxGroup",value:function(a){return(0,E.ZP)(this.boxGroupMap,[a])}},{key:"getBoxGroupByName",value:function(b){var a=this.getBoxGroupIdByName(b);if(a)return this.getBoxGroup(a)}},{key:"getBoxGroupIdByName",value:function(a){return(0,E.ZP)(this,["boxGroupNameInvertMap",a])}},{key:"getBoxComponent",value:function(a,b){var{onGetBoxComponent:c}=this.props;return(0,H.ZP)(c,[a,b])||X}},{key:"getBoxGroupComponent",value:function(a){var{onGetBoxGroupComponent:b}=this.props;return(0,H.ZP)(b,[a])||U}},{key:"getVectorEl",value:function(){return this.vector}},{key:"getBoundingClientRect",value:function(){var a=this.getVectorEl();return(0,G.ZP)(a)}},{key:"getConnectStartPoint",value:function(){return this.startPoint}},{key:"getConnectEndPoint",value:function(){return this.endPoint}},{key:"setConnectStartPoint",value:function(a){return this.startPoint=a,this.startPoint}},{key:"setConnectEndPoint",value:function(a){this.endPoint=a}},{key:"center",value:function(a,d){var{width:e,height:f}=a.getWH(),g=a.lastX,h=a.lastY,{width:i,height:j}=this.getBoundingClientRect(),b=this.getZoomK(),c={x:(-g-e/2)*b+i/2,y:(-h-f/2)*b+j/2};this.zoom.setXYK((0,A.Z)((0,A.Z)({},c),(0,H.ZP)(d,[c])))}},{key:"arrange",value:function(){var b,e=this,c=null===(b=this.oConn)|| void 0===b?void 0:b.getUniqueFromTo(),d=(0,J.tW)(this.boxGroupMap||{}).map(function(a){var b=e.boxGroupMap[a];return(0,A.Z)({key:a},b.getWH())}),a=(0,L.W_)("dagre");ay[a]={queueId:a,conns:c,nodes:d,callback:function(a){(0,J.tW)(a||{}).forEach(function(b){e.getBoxGroup(b).move(a[b].x,a[b].y)}),e.handleLoad()}},this.props.disableDagreWorker?aB(a):aC(a)}},{key:"syncPropConnects",value:function(){var f=this,{autoArrange:b}=this.props,c=this.oConn,{data:d,connsLocator:e,connFromBoxGroupLocator:g,connToBoxGroupLocator:h,connFromBoxLocator:i,connToBoxLocator:j,boxGroupsLocator:k,onConnAdd:l}=this.props,a=e(d);a&&a.length&&(a.forEach(function(a){var b=g(a),d=i(a),e=h(a),k=j(a);if(!b||!d||!e||!k){console.error("Sync props conns failed",[b,d,e,k,a]);return}var l=f.getBoxGroupIdByName(b),m=f.getBoxGroupIdByName(e),p=c.addLine(a),q=f.getBoxGroup(l).getBoxIdByName(d),r=f.getBoxGroup(m).getBoxIdByName(k),n=f.getBox(q,l),o=f.getBox(r,m);n&&o&&c.addConnected(p,n.getFromPoint(),o.getToPoint(),!0)}),c.setState(null,function(){b&&f.arrange()}),b||this.handleLoad())}},{key:"componentDidMount",value:function(){this.oConn=new at({host:this}),this.mount=!0}},{key:"componentWillUnmount",value:function(){var a;this.mount=!1,null===(a=this.oConn)|| void 0===a||a.clearTimeout()}},{key:"render",value:function(){var j=this,a=this.props,{autoArrange:k,arrowHeadComponent:b,disableDagreWorker:l,data:c,uniqueBoxGroupNameLocator:m,boxNameLocator:n,boxsLocator:o,boxGroupsLocator:d,boxGroupXLocator:p,boxGroupYLocator:q,connsLocator:r,connFromBoxGroupLocator:s,connToBoxGroupLocator:u,connFromBoxLocator:v,connToBoxLocator:w,children:e,editToCenter:x,editToCenterCb:y,editToCenterDelay:z,onAdd:E,onBoxWillDrag:F,onEdit:G,onDel:H,onDragEnd:I,onConnAdd:J,onConnWillAdd:K,onLineEdit:L,onLineDel:M,onLoad:O,onGetBoxGroupComponent:P,onGetBoxComponent:Q,onZoom:R,scaleExtent:f,lineDefaultProps:g,style:h}=a,i=(0,B.Z)(a,av);return(0,N.jsxs)(C.iX,{className:"d3-uml",style:(0,A.Z)((0,A.Z)({},aE.container),h),refCb:this.handleSetZoomEl,children:[(0,N.jsx)(D.kJ,(0,A.Z)((0,A.Z)({refCb:this.handleSetVector},i),{},{style:aE.svg,children:(0,N.jsxs)(D.LG,{onGetEl:this.handleGetZoomEl,ref:this.handleZoomRef,onZoom:this.handleZoom,scaleExtent:f,children:[(0,C.J_)(b)(),(0,N.jsx)(ap,{ref:this.handleSetLineListRef,host:this,lineDefaultProps:g})]})})),(0,N.jsx)(t,{refCb:this.handleSetHtmlEl,ref:this.handleSetHtmlObj,d3OnLoad:this.handleD3Load,children:(d(c)||[]).map(function(a){var b=m(a);return b.name?(0,N.jsx)($,(0,A.Z)((0,A.Z)({ref:j.addBoxGroup,host:j,onEdit:j.edit,onDel:j.del,onDragEnd:j.handleBoxGroupDragEnd,onWillDrag:F,x:p(a),y:q(a)},b),{},{children:o(a).map(function(a,c){return(0,N.jsx)(aj,(0,A.Z)({host:j,boxGroupName:b.name},n(a)),"box-"+c)})}),"box-group-"+b.name):null})}),e]})}}]),a}(b.Component);(0,c.Z)(j,"defaultProps",{boxGroupsLocator:function(a){return(a||{}).tables||[]},boxGroupXLocator:function(){},boxGroupYLocator:function(){},boxsLocator:function(a){return(a||{}).cols||[]},uniqueBoxGroupNameLocator:function(a){return a},boxNameLocator:function(a){return{name:a}},connsLocator:function(a){return a},connFromBoxGroupLocator:function(a){return a},connToBoxGroupLocator:function(a){return a},connFromBoxLocator:function(a){return a},connToBoxLocator:function(a){return a},arrowHeadComponent:l,autoArrange:!0,editToCenter:!1,editToCenterDelay:500,disableDagreWorker:!1});let aD=j;var aE={container:{overflow:"hidden",width:"100%",height:"100%",minHeight:100,position:"relative"},svg:{cursor:"crosshair",position:"absolute",top:0,left:0,width:"100%",height:"100%",overflow:"visible"},htmlGraph:{pointerEvents:"none",transformOrigin:"0 0",width:"100%",height:"100%"}}},17(c,b,a){a.d(b,{Z:()=>e});var d=a(4);let e=function(a){return(0,d.Z)("Code","M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z")(a)}},18(c,b,a){a.d(b,{Z:()=>e});var d=a(4);let e=function(a){return(0,d.Z)("Edit","M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z")(a)}},19(c,b,a){a.d(b,{Z:()=>g});var d=a(239),e=a(4),f=["viewBox"];let g=function(a){var{viewBox:c="0 0 16 16"}=a,b=(0,d.Z)(a,f);return b.viewBox=c,(0,e.Z)("Git","M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z")(b)}},20(c,b,a){a.d(b,{Z:()=>g});var d=a(239),e=a(4),f=["viewBox","fill"];let g=function(b){var{viewBox:c="0 0 3200 3200",fill:g="#b93131"}=b,a=(0,d.Z)(b,f);return a.viewBox=c,a.fill=g,(0,e.Z)("Npm","M269 3186 c-99 -27 -193 -106 -243 -205 l-26 -50 0 -1332 0 -1331 31 -59 c40 -75 102 -132 187 -172 l67 -32 1255 -3 c911 -2 1271 0 1315 8 119 23 224 102 282 211 l28 54 0 1325 0 1325 -29 54 c-42 80 -128 163 -201 192 l-60 24 -1280 2 c-992 1 -1290 -1 -1326 -11z m1311 -1386 l0 -600 200 0 200 0 0 600 0 600 200 0 200 0 0 -800 0 -800 -800 0 -800 0 0 800 0 800 400 0 400 0 0 -600z")(a)}},4(c,b,a){a.d(b,{Z:()=>j});var d=a(2),e=a(239),f=a(26),g=a(24),h=a(0),i=["type","children"];let j=function(b,c){var a=function(j){var{type:k=null,children:l}=j,m=(0,e.Z)(j,i),a=c[k]||c["_"]||c;return(0,h.jsxs)(f.Z,(0,d.Z)((0,d.Z)({},m),{},{"data-name":b,children:[a.map?a.map(function(a){return(0,h.jsx)(g.Z,{d:a})}):(0,h.jsx)(g.Z,{d:a}),l]}))};return a.displayName=b,a}}}])