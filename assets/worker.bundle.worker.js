(()=>{var __webpack_modules__=[(module,exports,__webpack_require__)=>{"use strict";function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}"undefined"!=typeof window?root=window:"undefined"==typeof self?(console.warn("Using browser-only version of superagent in non-browser environment"),root=void 0):root=self;var root,Emitter=__webpack_require__(5),safeStringify=__webpack_require__(6),RequestBase=__webpack_require__(7),isObject=__webpack_require__(3),ResponseBase=__webpack_require__(8),Agent=__webpack_require__(9);function noop(){}module.exports=function(method,url){return"function"==typeof url?new exports.Request("GET",method).end(url):1===arguments.length?new exports.Request("GET",method):new exports.Request(method,url)};var request=exports=module.exports;exports.Request=Request,request.getXHR=function(){if(root.XMLHttpRequest&&(!root.location||"file:"!==root.location.protocol||!root.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(_unused){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(_unused2){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(_unused3){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(_unused4){}throw new Error("Browser-only version of superagent could not find XHR")};var trim="".trim?function(s){return s.trim()}:function(s){return s.replace(/(^\s*|\s*$)/g,"")};function serialize(obj){if(!isObject(obj))return obj;var pairs=[];for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&pushEncodedKeyValuePair(pairs,key,obj[key]);return pairs.join("&")}function pushEncodedKeyValuePair(pairs,key,val){if(void 0!==val){if(null===val){pairs.push(encodeURI(key));return}if(Array.isArray(val))val.forEach(function(v){pushEncodedKeyValuePair(pairs,key,v)});else if(isObject(val))for(var subkey in val)Object.prototype.hasOwnProperty.call(val,subkey)&&pushEncodedKeyValuePair(pairs,"".concat(key,"[").concat(subkey,"]"),val[subkey]);else pairs.push(encodeURI(key)+"="+encodeURIComponent(val))}}function parseString(str){for(var pair,pos,obj={},pairs=str.split("&"),i=0,len=pairs.length;i<len;++i)-1===(pos=(pair=pairs[i]).indexOf("="))?obj[decodeURIComponent(pair)]="":obj[decodeURIComponent(pair.slice(0,pos))]=decodeURIComponent(pair.slice(pos+1));return obj}function parseHeader(str){for(var index,line,field,val,lines=str.split(/\r?\n/),fields={},i=0,len=lines.length;i<len;++i)-1!==(index=(line=lines[i]).indexOf(":"))&&(field=line.slice(0,index).toLowerCase(),val=trim(line.slice(index+1)),fields[field]=val);return fields}function isJSON(mime){return/[/+]json($|[^-\w])/.test(mime)}function Response(req){this.req=req,this.xhr=this.req.xhr,this.text="HEAD"!==this.req.method&&(""===this.xhr.responseType||"text"===this.xhr.responseType)|| void 0===this.xhr.responseType?this.xhr.responseText:null,this.statusText=this.req.xhr.statusText;var status=this.xhr.status;1223===status&&(status=204),this._setStatusProperties(status),this.headers=parseHeader(this.xhr.getAllResponseHeaders()),this.header=this.headers,this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this._setHeaderProperties(this.header),null===this.text&&req._responseType?this.body=this.xhr.response:this.body="HEAD"===this.req.method?null:this._parseBody(this.text?this.text:this.xhr.response)}function Request(method,url){var self=this;this._query=this._query||[],this.method=method,this.url=url,this.header={},this._header={},this.on("end",function(){var new_err,err=null,res=null;try{res=new Response(self)}catch(err_){return(err=new Error("Parser is unable to parse the response")).parse=!0,err.original=err_,self.xhr?(err.rawResponse=void 0===self.xhr.responseType?self.xhr.responseText:self.xhr.response,err.status=self.xhr.status?self.xhr.status:null,err.statusCode=err.status):(err.rawResponse=null,err.status=null),self.callback(err)}self.emit("response",res);try{self._isResponseOK(res)||(new_err=new Error(res.statusText||res.text||"Unsuccessful HTTP response"))}catch(err_){new_err=err_}new_err?(new_err.original=err,new_err.response=res,new_err.status=res.status,self.callback(new_err,res)):self.callback(null,res)})}function del(url,data,fn){var req=request("DELETE",url);return"function"==typeof data&&(fn=data,data=null),data&&req.send(data),fn&&req.end(fn),req}request.serializeObject=serialize,request.parseString=parseString,request.types={html:"text/html",json:"application/json",xml:"text/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},request.serialize={"application/x-www-form-urlencoded":serialize,"application/json":safeStringify},request.parse={"application/x-www-form-urlencoded":parseString,"application/json":JSON.parse},ResponseBase(Response.prototype),Response.prototype._parseBody=function(str){var parse=request.parse[this.type];return this.req._parser?this.req._parser(this,str):(!parse&&isJSON(this.type)&&(parse=request.parse["application/json"]),parse&&str&&(str.length>0||str instanceof Object)?parse(str):null)},Response.prototype.toError=function(){var req=this.req,method=req.method,url=req.url,msg="cannot ".concat(method," ").concat(url," (").concat(this.status,")"),err=new Error(msg);return err.status=this.status,err.method=method,err.url=url,err},request.Response=Response,Emitter(Request.prototype),RequestBase(Request.prototype),Request.prototype.type=function(type){return this.set("Content-Type",request.types[type]||type),this},Request.prototype.accept=function(type){return this.set("Accept",request.types[type]||type),this},Request.prototype.auth=function(user,pass,options){1===arguments.length&&(pass=""),"object"===_typeof(pass)&&null!==pass&&(options=pass,pass=""),options||(options={type:"function"==typeof btoa?"basic":"auto"});var encoder=function(string){if("function"==typeof btoa)return btoa(string);throw new Error("Cannot use basic auth, btoa is not a function")};return this._auth(user,pass,options,encoder)},Request.prototype.query=function(val){return"string"!=typeof val&&(val=serialize(val)),val&&this._query.push(val),this},Request.prototype.attach=function(field,file,options){if(file){if(this._data)throw new Error("superagent can't mix .send() and .attach()");this._getFormData().append(field,file,options||file.name)}return this},Request.prototype._getFormData=function(){return this._formData||(this._formData=new root.FormData),this._formData},Request.prototype.callback=function(err,res){if(this._shouldRetry(err,res))return this._retry();var fn=this._callback;this.clearTimeout(),err&&(this._maxRetries&&(err.retries=this._retries-1),this.emit("error",err)),fn(err,res)},Request.prototype.crossDomainError=function(){var err=new Error("Request has been terminated\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.");err.crossDomain=!0,err.status=this.status,err.method=this.method,err.url=this.url,this.callback(err)},Request.prototype.agent=function(){return console.warn("This is not supported in browser version of superagent"),this},Request.prototype.ca=Request.prototype.agent,Request.prototype.buffer=Request.prototype.ca,Request.prototype.write=function(){throw new Error("Streaming is not supported in browser version of superagent")},Request.prototype.pipe=Request.prototype.write,Request.prototype._isHost=function(obj){return obj&&"object"===_typeof(obj)&&!Array.isArray(obj)&&"[object Object]"!==Object.prototype.toString.call(obj)},Request.prototype.end=function(fn){this._endCalled&&console.warn("Warning: .end() was called twice. This is not supported in superagent"),this._endCalled=!0,this._callback=fn||noop,this._finalizeQueryString(),this._end()},Request.prototype._setUploadTimeout=function(){var self=this;this._uploadTimeout&&!this._uploadTimeoutTimer&&(this._uploadTimeoutTimer=setTimeout(function(){self._timeoutError("Upload timeout of ",self._uploadTimeout,"ETIMEDOUT")},this._uploadTimeout))},Request.prototype._end=function(){if(this._aborted)return this.callback(new Error("The request has been aborted even before .end() was called"));var self=this;this.xhr=request.getXHR();var xhr=this.xhr,data=this._formData||this._data;this._setTimeouts(),xhr.onreadystatechange=function(){var status,readyState=xhr.readyState;if(readyState>=2&&self._responseTimeoutTimer&&clearTimeout(self._responseTimeoutTimer),4===readyState){try{status=xhr.status}catch(_unused5){status=0}if(!status){if(self.timedout||self._aborted)return;return self.crossDomainError()}self.emit("end")}};var handleProgress=function(direction,e){e.total>0&&(e.percent=e.loaded/e.total*100,100===e.percent&&clearTimeout(self._uploadTimeoutTimer)),e.direction=direction,self.emit("progress",e)};if(this.hasListeners("progress"))try{xhr.addEventListener("progress",handleProgress.bind(null,"download")),xhr.upload&&xhr.upload.addEventListener("progress",handleProgress.bind(null,"upload"))}catch(_unused6){}xhr.upload&&this._setUploadTimeout();try{this.username&&this.password?xhr.open(this.method,this.url,!0,this.username,this.password):xhr.open(this.method,this.url,!0)}catch(err){return this.callback(err)}if(this._withCredentials&&(xhr.withCredentials=!0),!this._formData&&"GET"!==this.method&&"HEAD"!==this.method&&"string"!=typeof data&&!this._isHost(data)){var contentType=this._header["content-type"],_serialize=this._serializer||request.serialize[contentType?contentType.split(";")[0]:""];!_serialize&&isJSON(contentType)&&(_serialize=request.serialize["application/json"]),_serialize&&(data=_serialize(data))}for(var field in this.header)null!==this.header[field]&&Object.prototype.hasOwnProperty.call(this.header,field)&&xhr.setRequestHeader(field,this.header[field]);this._responseType&&(xhr.responseType=this._responseType),this.emit("request",this),xhr.send(void 0===data?null:data)},request.agent=function(){return new Agent},["GET","POST","OPTIONS","PATCH","PUT","DELETE"].forEach(function(method){Agent.prototype[method.toLowerCase()]=function(url,fn){var req=new request.Request(method,url);return this._setDefaults(req),fn&&req.end(fn),req}}),Agent.prototype.del=Agent.prototype.delete,request.get=function(url,data,fn){var req=request("GET",url);return"function"==typeof data&&(fn=data,data=null),data&&req.query(data),fn&&req.end(fn),req},request.head=function(url,data,fn){var req=request("HEAD",url);return"function"==typeof data&&(fn=data,data=null),data&&req.query(data),fn&&req.end(fn),req},request.options=function(url,data,fn){var req=request("OPTIONS",url);return"function"==typeof data&&(fn=data,data=null),data&&req.send(data),fn&&req.end(fn),req},request.del=del,request.delete=del,request.patch=function(url,data,fn){var req=request("PATCH",url);return"function"==typeof data&&(fn=data,data=null),data&&req.send(data),fn&&req.end(fn),req},request.post=function(url,data,fn){var req=request("POST",url);return"function"==typeof data&&(fn=data,data=null),data&&req.send(data),fn&&req.end(fn),req},request.put=function(url,data,fn){var req=request("PUT",url);return"function"==typeof data&&(fn=data,data=null),data&&req.send(data),fn&&req.end(fn),req}},(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{"$l":()=>OBJECT,QT:()=>SYMBOL,Wu:()=>NUMBER,cy:()=>FUNCTION,i_:()=>UNDEFINED,jd:()=>STRING,tW:()=>KEYS,un:()=>IS_ARRAY});var FUNCTION="function",NUMBER="number",OBJECT="object",STRING="string",SYMBOL="symbol",UNDEFINED="undefined",KEYS=Object.keys,IS_ARRAY=Array.isArray},(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _getTypeOf__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(4),reshow_constant__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1),_typeof=function(o){return reshow_constant__WEBPACK_IMPORTED_MODULE_1__.QT===(0,_getTypeOf__WEBPACK_IMPORTED_MODULE_0__.Z)(o)?reshow_constant__WEBPACK_IMPORTED_MODULE_1__.QT:(0,_getTypeOf__WEBPACK_IMPORTED_MODULE_0__.Z)(o,reshow_constant__WEBPACK_IMPORTED_MODULE_1__.$l)};const __WEBPACK_DEFAULT_EXPORT__=_typeof},module=>{"use strict";function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function isObject(obj){return null!==obj&&"object"===_typeof(obj)}module.exports=isObject},(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var reshow_constant__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),types="|boolean|"+reshow_constant__WEBPACK_IMPORTED_MODULE_0__.Wu+"|"+reshow_constant__WEBPACK_IMPORTED_MODULE_0__.jd+"|"+reshow_constant__WEBPACK_IMPORTED_MODULE_0__.$l+"|"+reshow_constant__WEBPACK_IMPORTED_MODULE_0__.cy+"|"+reshow_constant__WEBPACK_IMPORTED_MODULE_0__.i_+"|",toBase=function(type,name){return -1===types.indexOf("|"+type+"|")?(name||(name=type),name):type},getTypeIs=function(val,name){return toBase(Object.prototype.toString.call(val).replace(/^\[object\s(.*)\]$/,"$1").toLowerCase(),name)},getTypeOf=function(val,name){if(null==val)return getTypeIs(val,name);try{var type=Object.getPrototypeOf(val).constructor.name.toLowerCase();return toBase(type,name)}catch(ex){return getTypeIs(val,name)}};const __WEBPACK_DEFAULT_EXPORT__=getTypeOf},module=>{function Emitter(obj){if(obj)return mixin(obj)}function mixin(obj){for(var key in Emitter.prototype)obj[key]=Emitter.prototype[key];return obj}module.exports=Emitter,Emitter.prototype.on=Emitter.prototype.addEventListener=function(event,fn){return this._callbacks=this._callbacks||{},(this._callbacks["$"+event]=this._callbacks["$"+event]||[]).push(fn),this},Emitter.prototype.once=function(event,fn){function on(){this.off(event,on),fn.apply(this,arguments)}return on.fn=fn,this.on(event,on),this},Emitter.prototype.off=Emitter.prototype.removeListener=Emitter.prototype.removeAllListeners=Emitter.prototype.removeEventListener=function(event,fn){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var cb,callbacks=this._callbacks["$"+event];if(!callbacks)return this;if(1==arguments.length)return delete this._callbacks["$"+event],this;for(var i=0;i<callbacks.length;i++)if((cb=callbacks[i])===fn||cb.fn===fn){callbacks.splice(i,1);break}return 0===callbacks.length&&delete this._callbacks["$"+event],this},Emitter.prototype.emit=function(event){this._callbacks=this._callbacks||{};for(var args=new Array(arguments.length-1),callbacks=this._callbacks["$"+event],i=1;i<arguments.length;i++)args[i-1]=arguments[i];if(callbacks){callbacks=callbacks.slice(0);for(var i=0,len=callbacks.length;i<len;++i)callbacks[i].apply(this,args)}return this},Emitter.prototype.listeners=function(event){return this._callbacks=this._callbacks||{},this._callbacks["$"+event]||[]},Emitter.prototype.hasListeners=function(event){return!!this.listeners(event).length}},module=>{module.exports=stringify,stringify.default=stringify,stringify.stable=deterministicStringify,stringify.stableStringify=deterministicStringify;var LIMIT_REPLACE_NODE="[...]",CIRCULAR_REPLACE_NODE="[Circular]",arr=[],replacerStack=[];function defaultOptions(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function stringify(obj,replacer,spacer,options){void 0===options&&(options=defaultOptions()),decirc(obj,"",0,[],void 0,0,options);try{res=0===replacerStack.length?JSON.stringify(obj,replacer,spacer):JSON.stringify(obj,replaceGetterValues(replacer),spacer)}catch(_){return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;0!==arr.length;){var res,part=arr.pop();4===part.length?Object.defineProperty(part[0],part[1],part[3]):part[0][part[1]]=part[2]}}return res}function setReplace(replace,val,k,parent){var propertyDescriptor=Object.getOwnPropertyDescriptor(parent,k);void 0!==propertyDescriptor.get?propertyDescriptor.configurable?(Object.defineProperty(parent,k,{value:replace}),arr.push([parent,k,val,propertyDescriptor])):replacerStack.push([val,k,replace]):(parent[k]=replace,arr.push([parent,k,val]))}function decirc(val,k,edgeIndex,stack,parent,depth,options){if(depth+=1,"object"==typeof val&&null!==val){for(i=0;i<stack.length;i++)if(stack[i]===val){setReplace(CIRCULAR_REPLACE_NODE,val,k,parent);return}if(void 0!==options.depthLimit&&depth>options.depthLimit){setReplace(LIMIT_REPLACE_NODE,val,k,parent);return}if(void 0!==options.edgesLimit&&edgeIndex+1>options.edgesLimit){setReplace(LIMIT_REPLACE_NODE,val,k,parent);return}if(stack.push(val),Array.isArray(val))for(i=0;i<val.length;i++)decirc(val[i],i,i,stack,val,depth,options);else{var i,keys=Object.keys(val);for(i=0;i<keys.length;i++){var key=keys[i];decirc(val[key],key,i,stack,val,depth,options)}}stack.pop()}}function compareFunction(a,b){return a<b?-1:a>b?1:0}function deterministicStringify(obj,replacer,spacer,options){void 0===options&&(options=defaultOptions());var res,tmp=deterministicDecirc(obj,"",0,[],void 0,0,options)||obj;try{res=0===replacerStack.length?JSON.stringify(tmp,replacer,spacer):JSON.stringify(tmp,replaceGetterValues(replacer),spacer)}catch(_){return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;0!==arr.length;){var part=arr.pop();4===part.length?Object.defineProperty(part[0],part[1],part[3]):part[0][part[1]]=part[2]}}return res}function deterministicDecirc(val,k,edgeIndex,stack,parent,depth,options){if(depth+=1,"object"==typeof val&&null!==val){for(i=0;i<stack.length;i++)if(stack[i]===val){setReplace(CIRCULAR_REPLACE_NODE,val,k,parent);return}try{if("function"==typeof val.toJSON)return}catch(_){return}if(void 0!==options.depthLimit&&depth>options.depthLimit){setReplace(LIMIT_REPLACE_NODE,val,k,parent);return}if(void 0!==options.edgesLimit&&edgeIndex+1>options.edgesLimit){setReplace(LIMIT_REPLACE_NODE,val,k,parent);return}if(stack.push(val),Array.isArray(val))for(i=0;i<val.length;i++)deterministicDecirc(val[i],i,i,stack,val,depth,options);else{var i,tmp={},keys=Object.keys(val).sort(compareFunction);for(i=0;i<keys.length;i++){var key=keys[i];deterministicDecirc(val[key],key,i,stack,val,depth,options),tmp[key]=val[key]}if(void 0===parent)return tmp;arr.push([parent,k,val]),parent[k]=tmp}stack.pop()}}function replaceGetterValues(replacer){return replacer=void 0!==replacer?replacer:function(k,v){return v},function(key,val){if(replacerStack.length>0)for(var i=0;i<replacerStack.length;i++){var part=replacerStack[i];if(part[1]===key&&part[0]===val){val=part[2],replacerStack.splice(i,1);break}}return replacer.call(this,key,val)}}},(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}var isObject=__webpack_require__(3);function RequestBase(obj){if(obj)return mixin(obj)}function mixin(obj){for(var key in RequestBase.prototype)Object.prototype.hasOwnProperty.call(RequestBase.prototype,key)&&(obj[key]=RequestBase.prototype[key]);return obj}module.exports=RequestBase,RequestBase.prototype.clearTimeout=function(){return clearTimeout(this._timer),clearTimeout(this._responseTimeoutTimer),clearTimeout(this._uploadTimeoutTimer),delete this._timer,delete this._responseTimeoutTimer,delete this._uploadTimeoutTimer,this},RequestBase.prototype.parse=function(fn){return this._parser=fn,this},RequestBase.prototype.responseType=function(val){return this._responseType=val,this},RequestBase.prototype.serialize=function(fn){return this._serializer=fn,this},RequestBase.prototype.timeout=function(options){if(!options||"object"!==_typeof(options))return this._timeout=options,this._responseTimeout=0,this._uploadTimeout=0,this;for(var option in options)if(Object.prototype.hasOwnProperty.call(options,option))switch(option){case"deadline":this._timeout=options.deadline;break;case"response":this._responseTimeout=options.response;break;case"upload":this._uploadTimeout=options.upload;break;default:console.warn("Unknown timeout option",option)}return this},RequestBase.prototype.retry=function(count,fn){return(0===arguments.length|| !0===count)&&(count=1),count<=0&&(count=0),this._maxRetries=count,this._retries=0,this._retryCallback=fn,this};var ERROR_CODES=["ECONNRESET","ETIMEDOUT","EADDRINFO","ESOCKETTIMEDOUT"];RequestBase.prototype._shouldRetry=function(err,res){if(!this._maxRetries||(this._retries++)>=this._maxRetries)return!1;if(this._retryCallback)try{var override=this._retryCallback(err,res);if(!0===override)return!0;if(!1===override)return!1}catch(err_){console.error(err_)}if(res&&res.status&&res.status>=500&&501!==res.status)return!0;if(err){if(err.code&&ERROR_CODES.includes(err.code))return!0;if(err.timeout&&"ECONNABORTED"===err.code)return!0;if(err.crossDomain)return!0}return!1},RequestBase.prototype._retry=function(){return this.clearTimeout(),this.req&&(this.req=null,this.req=this.request()),this._aborted=!1,this.timedout=!1,this.timedoutError=null,this._end()},RequestBase.prototype.then=function(resolve,reject){var _this=this;if(!this._fullfilledPromise){var self=this;this._endCalled&&console.warn("Warning: superagent request was sent twice, because both .end() and .then() were called. Never call .end() if you use promises"),this._fullfilledPromise=new Promise(function(resolve,reject){self.on("abort",function(){if(_this.timedout&&_this.timedoutError){reject(_this.timedoutError);return}var err=new Error("Aborted");err.code="ABORTED",err.status=_this.status,err.method=_this.method,err.url=_this.url,reject(err)}),self.end(function(err,res){err?reject(err):resolve(res)})})}return this._fullfilledPromise.then(resolve,reject)},RequestBase.prototype.catch=function(cb){return this.then(void 0,cb)},RequestBase.prototype.use=function(fn){return fn(this),this},RequestBase.prototype.ok=function(cb){if("function"!=typeof cb)throw new Error("Callback required");return this._okCallback=cb,this},RequestBase.prototype._isResponseOK=function(res){return!!res&&(this._okCallback?this._okCallback(res):res.status>=200&&res.status<300)},RequestBase.prototype.get=function(field){return this._header[field.toLowerCase()]},RequestBase.prototype.getHeader=RequestBase.prototype.get,RequestBase.prototype.set=function(field,val){if(isObject(field)){for(var key in field)Object.prototype.hasOwnProperty.call(field,key)&&this.set(key,field[key]);return this}return this._header[field.toLowerCase()]=val,this.header[field]=val,this},RequestBase.prototype.unset=function(field){return delete this._header[field.toLowerCase()],delete this.header[field],this},RequestBase.prototype.field=function(name,val){if(null==name)throw new Error(".field(name, val) name can not be empty");if(this._data)throw new Error(".field() can't be used if .send() is used. Please use only .send() or only .field() & .attach()");if(isObject(name)){for(var key in name)Object.prototype.hasOwnProperty.call(name,key)&&this.field(key,name[key]);return this}if(Array.isArray(val)){for(var i in val)Object.prototype.hasOwnProperty.call(val,i)&&this.field(name,val[i]);return this}if(null==val)throw new Error(".field(name, val) val can not be empty");return"boolean"==typeof val&&(val=String(val)),this._getFormData().append(name,val),this},RequestBase.prototype.abort=function(){return this._aborted||(this._aborted=!0,this.xhr&&this.xhr.abort(),this.req&&this.req.abort(),this.clearTimeout(),this.emit("abort")),this},RequestBase.prototype._auth=function(user,pass,options,base64Encoder){switch(options.type){case"basic":this.set("Authorization","Basic ".concat(base64Encoder("".concat(user,":").concat(pass))));break;case"auto":this.username=user,this.password=pass;break;case"bearer":this.set("Authorization","Bearer ".concat(user));break;default:break}return this},RequestBase.prototype.withCredentials=function(on){return void 0===on&&(on=!0),this._withCredentials=on,this},RequestBase.prototype.redirects=function(n){return this._maxRedirects=n,this},RequestBase.prototype.maxResponseSize=function(n){if("number"!=typeof n)throw new TypeError("Invalid argument");return this._maxResponseSize=n,this},RequestBase.prototype.toJSON=function(){return{method:this.method,url:this.url,data:this._data,headers:this._header}},RequestBase.prototype.send=function(data){var isObj=isObject(data),type=this._header["content-type"];if(this._formData)throw new Error(".send() can't be used if .attach() or .field() is used. Please use only .send() or only .field() & .attach()");if(isObj&&!this._data)Array.isArray(data)?this._data=[]:this._isHost(data)||(this._data={});else if(data&&this._data&&this._isHost(this._data))throw new Error("Can't merge these send calls");if(isObj&&isObject(this._data))for(var key in data)Object.prototype.hasOwnProperty.call(data,key)&&(this._data[key]=data[key]);else"string"==typeof data?(type||this.type("form"),"application/x-www-form-urlencoded"===(type=this._header["content-type"])?this._data=this._data?"".concat(this._data,"&").concat(data):data:this._data=(this._data||"")+data):this._data=data;return!isObj||this._isHost(data)||type||this.type("json"),this},RequestBase.prototype.sortQuery=function(sort){return this._sort=void 0===sort||sort,this},RequestBase.prototype._finalizeQueryString=function(){var query=this._query.join("&");if(query&&(this.url+=(this.url.includes("?")?"&":"?")+query),this._query.length=0,this._sort){var index=this.url.indexOf("?");if(index>=0){var queryArr=this.url.slice(index+1).split("&");"function"==typeof this._sort?queryArr.sort(this._sort):queryArr.sort(),this.url=this.url.slice(0,index)+"?"+queryArr.join("&")}}},RequestBase.prototype._appendQueryString=function(){console.warn("Unsupported")},RequestBase.prototype._timeoutError=function(reason,timeout,errno){if(!this._aborted){var err=new Error("".concat(reason+timeout,"ms exceeded"));err.timeout=timeout,err.code="ECONNABORTED",err.errno=errno,this.timedout=!0,this.timedoutError=err,this.abort(),this.callback(err)}},RequestBase.prototype._setTimeouts=function(){var self=this;this._timeout&&!this._timer&&(this._timer=setTimeout(function(){self._timeoutError("Timeout of ",self._timeout,"ETIME")},this._timeout)),this._responseTimeout&&!this._responseTimeoutTimer&&(this._responseTimeoutTimer=setTimeout(function(){self._timeoutError("Response timeout of ",self._responseTimeout,"ETIMEDOUT")},this._responseTimeout))}},(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var utils=__webpack_require__(15);function ResponseBase(obj){if(obj)return mixin(obj)}function mixin(obj){for(var key in ResponseBase.prototype)Object.prototype.hasOwnProperty.call(ResponseBase.prototype,key)&&(obj[key]=ResponseBase.prototype[key]);return obj}module.exports=ResponseBase,ResponseBase.prototype.get=function(field){return this.header[field.toLowerCase()]},ResponseBase.prototype._setHeaderProperties=function(header){var ct=header["content-type"]||"";this.type=utils.type(ct);var params=utils.params(ct);for(var key in params)Object.prototype.hasOwnProperty.call(params,key)&&(this[key]=params[key]);this.links={};try{header.link&&(this.links=utils.parseLinks(header.link))}catch(_unused){}},ResponseBase.prototype._setStatusProperties=function(status){var type=status/100|0;this.statusCode=status,this.status=this.statusCode,this.statusType=type,this.info=1===type,this.ok=2===type,this.redirect=3===type,this.clientError=4===type,this.serverError=5===type,this.error=(4===type||5===type)&&this.toError(),this.created=201===status,this.accepted=202===status,this.noContent=204===status,this.badRequest=400===status,this.unauthorized=401===status,this.notAcceptable=406===status,this.forbidden=403===status,this.notFound=404===status,this.unprocessableEntity=422===status}},module=>{"use strict";function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||"[object Arguments]"===Object.prototype.toString.call(iter))return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}}function Agent(){this._defaults=[]}["use","on","once","set","query","type","accept","auth","withCredentials","sortQuery","retry","ok","redirects","timeout","buffer","serialize","parse","ca","key","pfx","cert","disableTLSCerts"].forEach(function(fn){Agent.prototype[fn]=function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return this._defaults.push({fn:fn,args:args}),this}}),Agent.prototype._setDefaults=function(req){this._defaults.forEach(function(def){req[def.fn].apply(req,_toConsumableArray(def.args))})},module.exports=Agent},,(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>_objectSpread2});var _defineProperty__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(18),_getTypeOf__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(4),reshow_constant__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1);function _objectSpread2(target){for(var i=1,j=arguments.length;i<j;i++)if(i%2||!Object.getOwnPropertyDescriptors){var source=null!=arguments[i]?arguments[i]:{},ownKeys=(0,reshow_constant__WEBPACK_IMPORTED_MODULE_1__.tW)(source);(0,_getTypeOf__WEBPACK_IMPORTED_MODULE_0__.Z)(Object.getOwnPropertySymbols)===reshow_constant__WEBPACK_IMPORTED_MODULE_1__.cy&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key){(0,_defineProperty__WEBPACK_IMPORTED_MODULE_2__.Z)(target,key,source[key])})}else Object.defineProperties(target,Object.getOwnPropertyDescriptors(arguments[i]));return target}},(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{ZP:()=>__WEBPACK_DEFAULT_EXPORT__});var reshow_runtime_es_helpers_typeof__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2),reshow_constant__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1),getDefaultValue=function(v,cur){return reshow_constant__WEBPACK_IMPORTED_MODULE_1__.cy===(0,reshow_runtime_es_helpers_typeof__WEBPACK_IMPORTED_MODULE_0__.Z)(v)?v(cur):null!=v?v:cur},toJS=function(v){return v&&v.toJS?v.toJS():v},get=function(o,path,defaultValue){if(null==o)return getDefaultValue(defaultValue,o);var current=toJS(o);if(!path||!(0,reshow_constant__WEBPACK_IMPORTED_MODULE_1__.un)(path))return current;try{for(var i=path.length,j=path.length-1;i--;){var index=path[j-i];if(current&&reshow_constant__WEBPACK_IMPORTED_MODULE_1__.i_!==(0,reshow_runtime_es_helpers_typeof__WEBPACK_IMPORTED_MODULE_0__.Z)(current[index])){if(current=current[index],null==current){current=getDefaultValue(defaultValue,current);break}}else{current=getDefaultValue(defaultValue);break}}}catch(e){console.warn({e:e}),current=getDefaultValue(defaultValue)}return current};const __WEBPACK_DEFAULT_EXPORT__=get},(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>es_src});var createClass=__webpack_require__(19),classCallCheck=__webpack_require__(20),defineProperty=__webpack_require__(18);__webpack_require__(14),__webpack_require__(2),__webpack_require__(1);var defaultObj={__null:!0},win=function(def){return"undefined"!=typeof window?window:def||defaultObj},NonWorker=(0,createClass.Z)(function NonWorker(_callback){var _this=this;if((0,classCallCheck.Z)(this,NonWorker),(0,defineProperty.Z)(this,"callbacks",[]),(0,defineProperty.Z)(this,"addEventListener",function(type,callback){return _this.callbacks.push(callback)}),(0,defineProperty.Z)(this,"postMessage",function(data){var e={data:data};_this.onmessage(e)}),this.post=function(data){var e={data:data};_this.callbacks.forEach(function(c){return c(e)})},this.onmessage=_callback,win().__null){try{onmessage=_callback}catch(e){console.error(e)}try{var post=postMessage;post&&(post({type:"ready"}),this.post=post)}catch(e){console.error(e)}}});const es_src=NonWorker},()=>{Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(searchElement,fromIndex){if(this==null)throw new TypeError('"this" is null or not defined');var o=Object(this),len=o.length>>>0;if(0===len)return!1;var n=0|fromIndex,k=Math.max(n>=0?n:len-Math.abs(n),0);function sameValueZero(x,y){return x===y||"number"==typeof x&&"number"==typeof y&&isNaN(x)&&isNaN(y)}for(;k<len;){if(sameValueZero(o[k],searchElement))return!0;k++}return!1}}),String.prototype.includes||(String.prototype.includes=function(search,start){if(search instanceof RegExp)throw TypeError("first argument must not be a RegExp");return void 0===start&&(start=0),-1!==this.indexOf(search,start)})},(__unused_webpack_module,exports)=>{"use strict";exports.type=function(str){return str.split(/ *; */).shift()},exports.params=function(str){return str.split(/ *; */).reduce(function(obj,str){var parts=str.split(/ *= */),key=parts.shift(),val=parts.shift();return key&&val&&(obj[key]=val),obj},{})},exports.parseLinks=function(str){return str.split(/ *, */).reduce(function(obj,str){var parts=str.split(/ *; */),url=parts[0].slice(1,-1),rel=parts[1].split(/ *= */)[1].slice(1,-1);return obj[rel]=url,obj},{})},exports.cleanHeader=function(header,changesOrigin){return delete header["content-type"],delete header["content-length"],delete header["transfer-encoding"],delete header.host,changesOrigin&&(delete header.authorization,delete header.cookie),header}},(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var commentReg=/^\s*[;]/,kvReg=/^\[([^\]]*)\]$|^([^=]+)(=(.*))?$/i,linesReg=/[\r\n]+/g,stripQuoteReg=/\\"/g,isArray=Array.isArray,isQuoted=function(s){if(s.length<=1)return!1;var bAndE=s.charAt(0)+""+s.slice(-1),bAndE2=s.charAt(0)+""+s.slice(-2);return'""'===bAndE||"''"===bAndE||'"";'===bAndE2||"'';"===bAndE2},stripQuote=function(s){return s.replace(stripQuoteReg,'"').substring(1,s.length-(";"===s.slice(-1)?2:1))},isMultiLine=function(s){var n=s.trim();return!isQuoted(n)&&'"'===n.charAt(0)},parse=function(s){var lines=s.split(linesReg),value="",key="",p={};return lines.forEach(function(line){var isEnd=!1;if(!(!line||commentReg.test(line))){if(key){var lineTrim=line.trim();('"'===lineTrim||'";'===lineTrim)&&(isEnd=!0),isEnd||(value+="\n"),value+=line}else{var match=line.match(kvReg);if(!match){console.error("Ini Parse Fail: "+line);return}key=match[2],value=match[3]?match[4]||"":"",key.length>2&&"[]"===key.slice(-2)&&(p[key=key.substring(0,key.length-2)]?isArray(p[key])||(p[key]=[p[key]]):p[key]=[]),isMultiLine(value)||(isEnd=!0)}if(isEnd){if(isQuoted(value))value=stripQuote(value);else switch(value.toLowerCase()){case"true":case"false":case"null":value=JSON.parse(value.toLowerCase());break}(key=key.trim())&&(isArray(p[key])?p[key].push(value):p[key]=value),key="",value=""}}}),p};const __WEBPACK_DEFAULT_EXPORT__=parse},(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{b:()=>src_nest});var isPrototypePolluted=function(arrPath){var joinPath="|".concat(arrPath.join("|"),"|");return["__proto__","constructor","prototype"].some(function(key){return -1!==joinPath.indexOf("|".concat(key,"|"))})},replaceValue=function(obj,arrPath,val,isAppend,unSafe){if(!unSafe&&isPrototypePolluted(arrPath))throw"Contain un-safe key.";var last=arrPath.pop(),linkObj=obj;arrPath.forEach(function(k){var _linkObj$k;linkObj[k]=null!==(_linkObj$k=linkObj[k])&& void 0!==_linkObj$k?_linkObj$k:Object.create(null),linkObj=linkObj[k]}),!isAppend||linkObj[last]&&linkObj[last].push?isAppend&&linkObj[last].push?linkObj[last].push(val):linkObj[last]=val:linkObj[last]?linkObj[last]=[linkObj[last],val]:linkObj[last]=[val]};const src=replaceValue;var keys=Object.keys,nest=function(a,delimiter){delimiter||(delimiter=".");var tree={};return keys(a).forEach(function(k){if(-1===k.indexOf(delimiter)){tree[k]=a[k];return}src(tree,k.split(delimiter),a[k])}),tree};const src_nest=nest},(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _defineProperty=function(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj};const __WEBPACK_DEFAULT_EXPORT__=_defineProperty},(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var defineProperties=function(target,props){for(var i=0,j=props.length;i<j;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}},createClass=function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor};const __WEBPACK_DEFAULT_EXPORT__=createClass},(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";function classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});const __WEBPACK_DEFAULT_EXPORT__=classCallCheck},(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var objectWithoutProperties=function(obj,keys){var target={};for(var i in obj)!(keys.indexOf(i)>=0)&&Object.prototype.hasOwnProperty.call(obj,i)&&(target[i]=obj[i]);return target};const __WEBPACK_DEFAULT_EXPORT__=objectWithoutProperties}],__webpack_module_cache__={};function __webpack_require__(moduleId){var cachedModule=__webpack_module_cache__[moduleId];if(void 0!==cachedModule)return cachedModule.exports;var module=__webpack_module_cache__[moduleId]={exports:{}};return __webpack_modules__[moduleId](module,module.exports,__webpack_require__),module.exports}__webpack_require__.n=module=>{var getter=module&&module.__esModule?()=>module.default:()=>module;return __webpack_require__.d(getter,{a:getter}),getter},__webpack_require__.d=(exports,definition)=>{for(var key in definition)__webpack_require__.o(definition,key)&&!__webpack_require__.o(exports,key)&&Object.defineProperty(exports,key,{enumerable:!0,get:definition[key]})},__webpack_require__.o=(obj,prop)=>Object.prototype.hasOwnProperty.call(obj,prop),(()=>{"use strict";var reshow_runtime_es_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(20),reshow_runtime_es_helpers_createClass__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(19),reshow_runtime_es_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(18),reshow_runtime_es_helpers_typeof__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2),reshow_runtime_es_helpers_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(21),reshow_runtime_es_helpers_objectSpread2__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(11),get_object_value__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(12),non_worker__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(13),superagent__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(0),superagent__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(superagent__WEBPACK_IMPORTED_MODULE_4__),parse_ini_string__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(16),object_nested__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(17),reshow_constant__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(1),_excluded=["error","req","text","xhr"],_excluded2=["id","query","isSendJson","cookHeaders","responseType"],_excluded3=["error","req","text","xhr"],_this=void 0,arrWs={},arrReq={},getJson=function(text){var json;try{json=JSON.parse(text)}catch(e){}return json||{}},oNonWorker=new non_worker__WEBPACK_IMPORTED_MODULE_3__.Z(function(e){var data=(0,get_object_value__WEBPACK_IMPORTED_MODULE_2__.ZP)(e,["data"]);switch(data.type){case"initWs":initWs(data.ws)(data.params);break;case"closeWs":closeWs(data.ws);break;case"ajaxGet":ajaxGet(data);break;case"ajaxPost":ajaxPost(data);break}}),post=function(payload){var strWcb=(0,get_object_value__WEBPACK_IMPORTED_MODULE_2__.ZP)(payload,["params","workerCallback"]),parseIni=(0,get_object_value__WEBPACK_IMPORTED_MODULE_2__.ZP)(payload,["params","ini"]),text=(0,get_object_value__WEBPACK_IMPORTED_MODULE_2__.ZP)(payload,["params","text"]);payload.params.json=parseIni?(0,object_nested__WEBPACK_IMPORTED_MODULE_6__.b)((0,parse_ini_string__WEBPACK_IMPORTED_MODULE_5__.Z)(text),"_"):getJson(text),strWcb&&(payload=eval("("+strWcb+")")(payload)),oNonWorker.post.call(_this,payload)},cookParams=function(action,callReq){var params=(0,get_object_value__WEBPACK_IMPORTED_MODULE_2__.ZP)(action,["params"],{}),id=params.id;id&&(arrReq[id]&&arrReq[id].abort(),arrReq[id]=callReq);var cookHeaders=(0,reshow_runtime_es_helpers_objectSpread2__WEBPACK_IMPORTED_MODULE_1__.Z)((0,reshow_runtime_es_helpers_objectSpread2__WEBPACK_IMPORTED_MODULE_1__.Z)((0,reshow_runtime_es_helpers_objectSpread2__WEBPACK_IMPORTED_MODULE_1__.Z)({},(0,get_object_value__WEBPACK_IMPORTED_MODULE_2__.ZP)(params,["globalHeaders"],{})),(0,get_object_value__WEBPACK_IMPORTED_MODULE_2__.ZP)(params,["headers"],{})),{},{Accept:(0,get_object_value__WEBPACK_IMPORTED_MODULE_2__.ZP)(params,["accept"],"application/json")});params.cookHeaders=cookHeaders;var superagent=params.superagent||{},syncKeys=["responseType"];return syncKeys.forEach(function(key){params[key]&&(superagent[key]=params[key])}),(0,reshow_constant__WEBPACK_IMPORTED_MODULE_7__.tW)(superagent).forEach(function(key){callReq=callReq[key].apply(callReq,superagent[key])}),params},ajaxGet=function(_ref){var url=_ref.url,action=_ref.action,callReq=superagent__WEBPACK_IMPORTED_MODULE_4___default().get(url),_cookParams=cookParams(action,callReq),query=_cookParams.query,cookHeaders=_cookParams.cookHeaders,id=_cookParams.id;callReq.query(query).set(cookHeaders).end(function(err,res){if(res){arrReq[id]&&delete arrWs[id],res.error,res.req;var text=res.text,response=(res.xhr,(0,reshow_runtime_es_helpers_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_8__.Z)(res,_excluded));action.params=(0,reshow_runtime_es_helpers_objectSpread2__WEBPACK_IMPORTED_MODULE_1__.Z)((0,reshow_runtime_es_helpers_objectSpread2__WEBPACK_IMPORTED_MODULE_1__.Z)({},action.params),{},{text:text,response:response}),post(action)}})},ajaxPost=function(_ref2){var callReq,url=_ref2.url,action=_ref2.action;switch((0,get_object_value__WEBPACK_IMPORTED_MODULE_2__.ZP)(action,["params","method"])){case"delete":callReq=superagent__WEBPACK_IMPORTED_MODULE_4___default().del(url);break;case"head":callReq=superagent__WEBPACK_IMPORTED_MODULE_4___default().head(url);break;case"patch":callReq=superagent__WEBPACK_IMPORTED_MODULE_4___default().patch(url);break;case"put":callReq=superagent__WEBPACK_IMPORTED_MODULE_4___default().put(url);break;default:callReq=superagent__WEBPACK_IMPORTED_MODULE_4___default().post(url);break}var _cookParams2=cookParams(action,callReq),id=_cookParams2.id,query=_cookParams2.query,isSendJson=_cookParams2.isSendJson,cookHeaders=_cookParams2.cookHeaders;_cookParams2.responseType,(0,reshow_runtime_es_helpers_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_8__.Z)(_cookParams2,_excluded2);var isSend=!1;isSendJson?isSend=!0:null==isSendJson&&query&&(0,reshow_constant__WEBPACK_IMPORTED_MODULE_7__.tW)(query).every(function(key){return"object"!==(0,reshow_runtime_es_helpers_typeof__WEBPACK_IMPORTED_MODULE_0__.Z)(query[key])||(isSend=!0,!1)}),isSend||(callReq=callReq.type("form")),callReq.send(query).set(cookHeaders).end(function(err,res){if(res){arrReq[id]&&delete arrWs[id],res.error,res.req;var text=res.text,response=(res.xhr,(0,reshow_runtime_es_helpers_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_8__.Z)(res,_excluded3));action.params=(0,reshow_runtime_es_helpers_objectSpread2__WEBPACK_IMPORTED_MODULE_1__.Z)((0,reshow_runtime_es_helpers_objectSpread2__WEBPACK_IMPORTED_MODULE_1__.Z)({},action.params),{},{text:text,response:response}),post(action)}})},closeWs=function(url){return arrWs[url]&&(arrWs[url].close(),delete arrWs[url]),!arrWs[url]},WebSocketHelper=function(){function WebSocketHelper(url,params){(0,reshow_runtime_es_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_9__.Z)(this,WebSocketHelper),(0,reshow_runtime_es_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_10__.Z)(this,"isWsConnect",!1),this.ws=null,this.pingTimeout=null,this.url=url,this.params=params,this.open()}return(0,reshow_runtime_es_helpers_createClass__WEBPACK_IMPORTED_MODULE_11__.Z)(WebSocketHelper,[{key:"open",value:function(){var _this2=this;if(!this.isWsConnect){var url=this.url,params=this.params,ws=new WebSocket(url);this.ws=ws,ws.onopen=function(e){_this2.isWsConnect=!0,_this2.ping();var messages=params.messages;(0,get_object_value__WEBPACK_IMPORTED_MODULE_2__.ZP)(messages,["length"])&&messages.forEach(function(m){return ws.send(JSON.stringify(m))})},ws.onerror=function(e){_this2.isWsConnect=!1,_this2.ping()},ws.onmessage=function(e){switch(e.data){case"pong":break;default:post({type:"ws",params:{text:e.data,url:url}});break}},ws.onclose=function(e){_this2.isWsConnect=!1,console.warn("WS close.",url)}}}},{key:"close",value:function(){this.ws.close(),this.clearPing()}},{key:"clearPing",value:function(){this.pingTimeout&&(clearTimeout(this.pingTimeout),this.pingTimeout=null)}},{key:"ping",value:function(){var _this3=this;this.clearPing(),this.pingTimeout=setTimeout(function(){_this3.isWsConnect?_this3.ws.send(JSON.stringify({type:"ping"})):(console.warn("Try restore ws connection.",_this3.url),_this3.open()),_this3.ping()},15e3)}}]),WebSocketHelper}(),initWs=function(url){return function(params){var create=function(){arrWs[url]=new WebSocketHelper(url,params)};arrWs[url]||create(url)}}})()})()