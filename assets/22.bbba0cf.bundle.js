"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[22],{49(c,b,a){a.d(b,{ZP:()=>h,hC:()=>g,yu:()=>f});var d,e=a(7),f=function(a){return d=a},g=function(){for(var b=arguments.length,c=new Array(b),a=0;a<b;a++)c[a]=arguments[a];return(0,e.ZP)(d.juice,c)};let h=function(a){return(0,e.ZP)(d.mjml2html,[a])}},402(i,d,a){a.r(d),a.d(d,{default:()=>an});var j,k,l,m,n,o=a(2),p=a(16),q=a(37),b=a(1),r=a(32),s=a(475),t=a(466),u=a(467),v=a(473),w=a(9),x=a(10),c=a(460),y=a(7),z=a(5),A=a(75),B=a(3),C=a(48),D=a(43);a(17);var E=a(109),F=a(8),G=a(143),H=function(a){return j=a};let I=function(a,b){return(0,G.Z)(a,j,b)};var J=a(49),K={"grapes.min.css":"https://cdn.jsdelivr.net/npm/grapesjs@0.18.2/dist/css/grapes.min.css","grapes.min.js":"https://cdn.jsdelivr.net/npm/grapesjs@0.18.2/dist/grapes.min.js","ckeditor.js":"https://cdn.jsdelivr.net/npm/ckeditor4@4.17.2/ckeditor.js","mjml.js":"https://cdn.jsdelivr.net/npm/organism-react-grapesjs@0.5.6/dist/mjml.js"};let L=function(a,b,e){var c=b.assetPath,d=b.assets;return c?c+a:(0,z.ZP)(d,[a])?d[a]:e[a]||K[a]},M=function(){JSON.parse('{"aviaryOpts":false,"blocksBasicOpts":{"flexGrid":1},"customStyleManager":[{"name":"General","buildProps":["float","display","position","top","right","left","bottom"],"properties":[{"name":"Alignment","property":"float","type":"radio","defaults":"none","list":[{"value":"none","className":"fa fa-times"},{"value":"left","className":"fa fa-align-left"},{"value":"right","className":"fa fa-align-right"}]},{"property":"position","type":"select"}]},{"name":"Dimension","open":false,"buildProps":["width","flex-width","height","max-width","min-height","margin","padding"],"properties":[{"id":"flex-width","type":"integer","name":"Width","units":["px","%"],"property":"flex-basis","toRequire":1},{"property":"margin","properties":[{"name":"Top","property":"margin-top"},{"name":"Right","property":"margin-right"},{"name":"Bottom","property":"margin-bottom"},{"name":"Left","property":"margin-left"}]},{"property":"padding","properties":[{"name":"Top","property":"padding-top"},{"name":"Right","property":"padding-right"},{"name":"Bottom","property":"padding-bottom"},{"name":"Left","property":"padding-left"}]}]},{"name":"Typography","open":false,"buildProps":["font-family","font-size","font-weight","letter-spacing","color","line-height","text-align","text-decoration","text-shadow"],"properties":[{"name":"Font","property":"font-family"},{"name":"Weight","property":"font-weight"},{"name":"Font color","property":"color"},{"property":"text-align","type":"radio","defaults":"left","list":[{"value":"left","name":"Left","className":"fa fa-align-left"},{"value":"center","name":"Center","className":"fa fa-align-center"},{"value":"right","name":"Right","className":"fa fa-align-right"},{"value":"justify","name":"Justify","className":"fa fa-align-justify"}]},{"property":"text-decoration","type":"radio","defaults":"none","list":[{"value":"none","name":"None","className":"fa fa-times"},{"value":"underline","name":"underline","className":"fa fa-underline"},{"value":"line-through","name":"Line-through","className":"fa fa-strikethrough"}]},{"property":"text-shadow","properties":[{"name":"X position","property":"text-shadow-h"},{"name":"Y position","property":"text-shadow-v"},{"name":"Blur","property":"text-shadow-blur"},{"name":"Color","property":"text-shadow-color"}]}]},{"name":"Decorations","open":false,"buildProps":["opacity","background-color","border-radius","border","box-shadow","background"],"properties":[{"type":"slider","property":"opacity","defaults":1,"step":0.01,"max":1,"min":0},{"property":"border-radius","properties":[{"name":"Top","property":"border-top-left-radius"},{"name":"Right","property":"border-top-right-radius"},{"name":"Bottom","property":"border-bottom-left-radius"},{"name":"Left","property":"border-bottom-right-radius"}]},{"property":"box-shadow","properties":[{"name":"X position","property":"box-shadow-h"},{"name":"Y position","property":"box-shadow-v"},{"name":"Blur","property":"box-shadow-blur"},{"name":"Spread","property":"box-shadow-spread"},{"name":"Color","property":"box-shadow-color"},{"name":"Shadow type","property":"box-shadow-type"}]},{"property":"background","properties":[{"name":"Image","property":"background-image"},{"name":"Repeat","property":"background-repeat"},{"name":"Position","property":"background-position"},{"name":"Attachment","property":"background-attachment"},{"name":"Size","property":"background-size"}]}]},{"name":"Extra","open":false,"buildProps":["transition","perspective","transform"],"properties":[{"property":"transition","properties":[{"name":"Property","property":"transition-property"},{"name":"Duration","property":"transition-duration"},{"name":"Easing","property":"transition-timing-function"}]},{"property":"transform","properties":[{"name":"Rotate X","property":"transform-rotate-x"},{"name":"Rotate Y","property":"transform-rotate-y"},{"name":"Rotate Z","property":"transform-rotate-z"},{"name":"Scale X","property":"transform-scale-x"},{"name":"Scale Y","property":"transform-scale-y"},{"name":"Scale Z","property":"transform-scale-z"}]}]},{"name":"Flex","open":false,"properties":[{"name":"Flex Container","property":"display","type":"select","defaults":"block","list":[{"value":"block","name":"Disable"},{"value":"flex","name":"Enable"}]},{"name":"Flex Parent","property":"label-parent-flex","type":"integer"},{"name":"Direction","property":"flex-direction","type":"radio","defaults":"row","list":[{"value":"row","name":"Row","className":"icons-flex icon-dir-row","title":"Row"},{"value":"row-reverse","name":"Row reverse","className":"icons-flex icon-dir-row-rev","title":"Row reverse"},{"value":"column","name":"Column","title":"Column","className":"icons-flex icon-dir-col"},{"value":"column-reverse","name":"Column reverse","title":"Column reverse","className":"icons-flex icon-dir-col-rev"}]},{"name":"Justify","property":"justify-content","type":"radio","defaults":"flex-start","list":[{"value":"flex-start","className":"icons-flex icon-just-start","title":"Start"},{"value":"flex-end","title":"End","className":"icons-flex icon-just-end"},{"value":"space-between","title":"Space between","className":"icons-flex icon-just-sp-bet"},{"value":"space-around","title":"Space around","className":"icons-flex icon-just-sp-ar"},{"value":"center","title":"Center","className":"icons-flex icon-just-sp-cent"}]},{"name":"Align","property":"align-items","type":"radio","defaults":"center","list":[{"value":"flex-start","title":"Start","className":"icons-flex icon-al-start"},{"value":"flex-end","title":"End","className":"icons-flex icon-al-end"},{"value":"stretch","title":"Stretch","className":"icons-flex icon-al-str"},{"value":"center","title":"Center","className":"icons-flex icon-al-center"}]},{"name":"Flex Children","property":"label-parent-flex","type":"integer"},{"name":"Order","property":"order","type":"integer","defaults":0,"min":0},{"name":"Flex","property":"flex","type":"composite","properties":[{"name":"Grow","property":"flex-grow","type":"integer","defaults":0,"min":0},{"name":"Shrink","property":"flex-shrink","type":"integer","defaults":0,"min":0},{"name":"Basis","property":"flex-basis","type":"integer","units":["px","%",""],"unit":"","defaults":"auto"}]},{"name":"Align","property":"align-self","type":"radio","defaults":"auto","list":[{"value":"auto","name":"Auto"},{"value":"flex-start","title":"Start","className":"icons-flex icon-al-start"},{"value":"flex-end","title":"End","className":"icons-flex icon-al-end"},{"value":"stretch","title":"Stretch","className":"icons-flex icon-al-str"},{"value":"center","title":"Center","className":"icons-flex icon-al-center"}]}]}]}')};var N=/(class\=")([^"]*)(c\d{4})(\s)?([^"]*)/g;let O=function(b,f){var c,a=b.editor,d=b.html,e=b.css;null==d&&(d=null==a?void 0:a.getHtml()),null==e&&(e=null==a?void 0:a.getCss());var g=d+"<style>".concat(e,"</style>");return null===(c=(0,J.hC)(g,f))|| void 0===c?void 0:c.trim().replace(N,"$1$2$5")};var P=function(a){var f=a.mergeTags,b=a.CKEDITOR,c=a.extraPlugins,d=a.toolbar,e=a.i18nMergeTags,g=0,h=function(){var b=this;this.startGroup(e);var a=(0,y.ZP)(f);a&&a.forEach&&a.forEach(function(a){return b.add(a[0],a[1],a[2])}),g&&(this._.committed=0,this.commit())};return b.plugins.add("strinsert",{requires:["richcombo"],init:function(a){a.ui.addRichCombo("strinsert",{label:e,title:e,voiceLabel:e,className:"cke_format",multiSelect:!1,panel:{css:[a.config.contentsCss,b.skin.getPath("editor")],voiceLabel:a.lang.panelVoiceLabel},init:function(){var b=this;a.on("panelHide",function(){b._.list.element.$.innerHTML="",b._.list._.items={}}),g=0,h.call(this)},onOpen:function(){g&&h.call(this),g=1},onClick:function(b){a.focus(),a.fire("saveSnapshot"),a.insertHtml(b),a.fire("saveSnapshot")}})}}),d.push({name:e,items:["strinsert"]}),c+",strinsert"},Q=function(b){var a=b.CKEDITOR,g=b.font,d=b.mergeTags,h=b.i18nMergeTags,i=b.options;a.dtd.$editable.span=1,a.dtd.$editable.strong=1,a.dom.element.prototype.scrollIntoView=function(){};var c="sharedspace,justify,colorbutton,panelbutton,font",e=g?["Font"]:[];e.push("FontSize");var f=[{name:"styles",items:e},["Bold","Italic","Underline","Strike"],{name:"paragraph",items:["NumberedList","BulletedList"]},{name:"links",items:["Link","Unlink"]},{name:"colors",items:["TextColor","BGColor"]}];return d&&(c=P({i18nMergeTags:h,mergeTags:d,CKEDITOR:a,extraPlugins:c,toolbar:f})),{"gjs-plugin-ckeditor":{position:"center",options:(0,o.Z)((0,o.Z)({on:{paste:function(a){a.data.dataValue=I(a.data.dataValue,!0)}},removePlugins:"magicline",startupFocus:!0,extraAllowedContent:"*(*);*{*}",allowedContent:!0,enterMode:a.ENTER_P,shiftEnterMode:a.ENTER_P,disableAutoInline:!0,autoParagraph:!1},i),{},{extraPlugins:c,toolbar:f})}}};let R=function(d,a,e,f){var b=d.DomComponents,c=b.getType(a).model;b.addType(f||a,{model:c.extend({defaults:(0,o.Z)((0,o.Z)({},c.prototype.defaults),e)})})},S=function(a){R(a,"countdown",{script:function(){var c="{[ startfrom ]}".replace(/-/g,"/"),a="undefined"!=typeof items?items[0]:a;if(a){var b=window.timerArr||{};window.timerArr=b,b[a.id]&&clearInterval(b[a.id]),b[a.id]=setInterval(function(){if(!a){clearInterval(b[a.id]);return}var h=new Date(c).getTime(),i=new Date().getTime(),d=h-i,f=a.querySelector("[data-js=countdown-day]");if(!f){clearInterval(timer);return}var j=a.querySelector("[data-js=countdown-hour]"),k=a.querySelector("[data-js=countdown-minute]"),l=a.querySelector("[data-js=countdown-second]"),e=function(a){return((a+"").length<2?"0":"")+a};if(f.innerHTML=e(Math.floor(d/864e5)),j.innerHTML=e(Math.floor(d%864e5/36e5)),k.innerHTML=e(Math.floor(d%36e5/6e4)),l.innerHTML=e(Math.floor(d%6e4/1e3)),d<0){var m=a.querySelector("[data-js=countdown]"),g=a.querySelector("[data-js=countdown-endtext]");clearInterval(interval),g.innerHTML="{[ endText ]}",m.style.display="none",g.style.display=""}},1e3)}}})};var T=function(a){return a.stopPropagation()};let U=function(a){var b=a.grapesjs,c=a.CKEDITOR;b.plugins.add("gjs-plugin-ckeditor",function(a){var d=arguments.length>1&& void 0!==arguments[1]?arguments[1]:{},e=(0,o.Z)((0,o.Z)({},{position:"left"}),d);if(!c)throw new Error("CKEDITOR instance not found");a.setStyle('[contenteditable="true"]{padding:5px;}'),a.setCustomRte({enable:function(g,d){if(d&&"destroyed"!=d.status)return this.focus(g,d),d;g.contentEditable=!0;var i=a.RichTextEditor.getToolbarEl();[].forEach.call(i.children,function(a){a.style.display="none"});var f=e.options,h="sharedspace";return f.extraPlugins?"string"==typeof f.extraPlugins?f.extraPlugins+=","+h:f.extraPlugins.push(h):f.extraPlugins=h,e.options.sharedSpaces||(e.options.sharedSpaces={top:i}),(d=c.inline(g,e.options)).getContent=d.getData,d.on("contentDom",function(){var a=d.editable();a.attachListener(a,"click",function(){g.click()})}),d.on("instanceReady",function(c){var b=i.querySelector("#cke_"+d.name);b&&(b.style.display="block"),a.trigger("canvasScroll")}),d.on("dialogShow",function(a){var c=b.$(".cke_dialog_background_cover, .cke_dialog");["off","on"].forEach(function(a){return c[a]("mousedown",T)})}),this.focus(g,d),d},disable:function(b,a){b.contentEditable=!1,a&&a.focusManager&&a.focusManager.blur(!0)},focus:function(b,a){(!a||!a.focusManager.hasFocus)&&(b.contentEditable=!0,a&&a.focus())}}),a.on("rteToolbarPosUpdate",function(a){a.top,a.canvasOffsetTop,a.left<a.canvasOffsetLeft&&(a.left=a.canvasOffsetLeft)})})};var V={"sanitize-html":"https://cdn.jsdelivr.net/npm/sanitize-html@1.20.1/dist/sanitize-html.min.js","grapesjs-preset-webpage.min.js":"https://cdn.jsdelivr.net/npm/grapesjs-preset-webpage@0.1.11/dist/grapesjs-preset-webpage.min.js"},W=function(a){a.getPanel().addButton("options",[{id:"edit-code",className:"gjs-pn-btn fa fa-code",command:function(b,c){(0,E.j)(a.getDesign(),function(a){b.runCommand("core:canvas-clear"),b.setComponents(a)})},attributes:{title:"Edit Html"}}])},e=function(d){(0,w.Z)(a,d);var e=(0,x.Z)(a);function a(){var b;(0,t.Z)(this,a);for(var f=arguments.length,g=new Array(f),d=0;d<f;d++)g[d]=arguments[d];return b=e.call.apply(e,[this].concat(g)),(0,c.Z)((0,v.Z)(b),"handleIframe",function(a){b.dIframe=a}),(0,c.Z)((0,v.Z)(b),"handleRemoveAsset",function(c){var d=b.props.onRemoveAsset,e=c.get("src"),g=b.editor.DomComponents.getWrapper(),f=(0,D.jE)((0,z.ZP)((0,D.jE)(b.iframeWindow.document).one("iframe"),["contentWindow","window","document"])),a=f.all('img[src="'+e+'"]');a&&a.length&&a.forEach(function(b){var a=f.ancestor(b,'[data-gjs-type="mj-image"]');a&&g.find("#"+a.id)[0].remove()}),(0,y.ZP)(d,[c])}),(0,c.Z)((0,v.Z)(b),"handleLoad",function(a){b.iframeWindow=b.dIframe.contentWindow.window,b.iframeWindow.debug=(0,v.Z)(b),(0,J.yu)(b.iframeWindow),b.timer=setInterval(function(){b.iframeWindow.initEditor&&(clearInterval(b.timer),b.handleInitGrapesJS())},10)}),(0,c.Z)((0,v.Z)(b),"handleInitGrapesJS",function(){var a=b.props,f=a.disableCkeditor,i=a.i18nMergeTags,j=a.font,k=a.mergeTags,l=a.allowScripts,m=a.onEditorInit,n=a.onBeforeEditorInit,s=a.host,p=a.init,g=["gjs-preset-webpage"],d=f?null:b.iframeWindow.CKEDITOR,h={};f||(g.push("gjs-plugin-ckeditor"),U({grapesjs:b.iframeWindow.grapesjs,CKEDITOR:d}),h=Q({CKEDITOR:d,i18nMergeTags:i,font:j,mergeTags:k}));var e=(0,o.Z)({allowScripts:l,exportWrapper:!0,noticeOnUnload:!1,clearOnRender:!0,height:"100%",storageManager:{autosave:!1,autoload:!1},container:"#gjs",plugins:g,pluginsOpts:(0,o.Z)((0,o.Z)({},h),{},{"gjs-preset-webpage":M()})},p);(0,y.ZP)(n,[{CKEDITOR:d,initGrapesJS:e,component:(0,v.Z)(b)}]);var c=b.iframeWindow.initEditor(e),q=c.BlockManager,r=c.Commands;b.editor=c,b.initGrapesJS=e,r.extend("canvas-clear",{run:function(){return s.execClean(),!0}}),c.on("load",b.handleEditorLoad),c.on("asset:remove",b.handleRemoveAsset),b.hadleInitBlockManager(q),(0,y.ZP)(m,[{editor:c,component:(0,v.Z)(b)}])}),(0,c.Z)((0,v.Z)(b),"hadleInitBlockManager",function(a){var c=b.props.onInitBlockManager;(0,y.ZP)(c,[{blockManager:a,editor:b.editor}])}),(0,c.Z)((0,v.Z)(b),"handleInitStore",function(a){a.StorageManager.add("local",{store:function(a,b,c){(0,y.ZP)(b,[a])},load:function(a,b,c){console.log({keys:a,clb:b,clbErr:c})}})}),(0,c.Z)((0,v.Z)(b),"handleEditorLoad",function(){setTimeout(function(){var d=b.props,f=d.host,j=d.onEditorLoad,g=d.onError,a=d.design,h=b.iframeWindow.document,c=b.editor;if(H(b.iframeWindow.sanitizeHtml),S(c),b.handleInitStore(c),f.execReset(),a)try{if(F.jd===(0,A.Z)(a)){var i=I(a);c.setComponents(i)}else a["gjs-components"]&&c.setComponents(JSON.parse(a["gjs-components"])),a["gjs-styles"]&&c.setStyle(JSON.parse(a["gjs-styles"]))}catch(e){(0,y.ZP)(g,[{e:e,design:a,message:"HTML invalid syntax"}]),console.warn({e:e,design:a})}h.getElementById("root").className="",setTimeout(function(){(0,y.ZP)(j,[{editor:c,component:(0,v.Z)(b)}]),W(f)},10)},100)}),(0,c.Z)((0,v.Z)(b),"clearTimeout",function(){b.timer&&clearInterval(b.timer)}),b}return(0,u.Z)(a,[{key:"resetUploadField",value:function(){if(this.iframeWindow){var a=this.iframeWindow.document.getElementById("gjs-am-uploadFile");a&&(a.value="")}}},{key:"store",value:function(a){this.editor.store(function(b){var c=O({html:(0,z.ZP)(b,["gjs-html"]),css:(0,z.ZP)(b,["gjs-css"])});(0,y.ZP)(a,[{html:c,design:b}])})}},{key:"getAsset",value:function(a){return L(a,this.props,V)}},{key:"getImportButtonName",value:function(){return"gjs-open-import-webpage"}},{key:"getHtml",value:function(a){var b=this.props.host,c=this.getDesign();return b.toHtml(c,a)}},{key:"getDesign",value:function(){return O({editor:this.editor})}},{key:"componentWillUnmount",value:function(){this.clearTimeout()}},{key:"render",value:function(){var a=this.props,c=a.style,d=a.images,e=a.id,f=a.disableCkeditor,g=a.host;g.execUpdateImages((0,z.ZP)(d));var h='\n      <link rel="stylesheet" href="'.concat(this.getAsset("grapes.min.css"),'" />\n      <style>\n        .gjs-pn-buttons {overflow: hidden}\n        .loading {display: none}\n        #root.hidden .loading {display: block; visibility: visible}\n        #root.hidden {visibility: hidden}\n        #root {height: 100vh;}\n      </style>\n      <script async src="').concat(this.getAsset("sanitize-html"),'"></script>\n      <script async src="').concat(this.getAsset("mjml.js"),'"></script>\n      <script src="').concat(this.getAsset("grapes.min.js"),'"></script>\n      <script src="').concat(this.getAsset("grapesjs-preset-webpage.min.js"),'"></script>\n      ').concat(f?"":'<script src="'.concat(this.getAsset("ckeditor.js"),'"></script>'),'\n      <script>\n      window.initEditor = function(init) {\n         return grapesjs.init(init); \n      };\n     </script>\n     <div class="hidden" id="root">\n      <div class="loading">Loading...</div>\n      <div id="gjs"></div>\n     </div> \n    '),i=(0,o.Z)((0,o.Z)({},Y.iframe),c);return b.createElement(C.Z,{immutable:!0,id:e,style:i,refCb:this.handleIframe,onLoad:this.handleLoad},b.createElement(B.ER,null,h))}}]),a}(b.Component);(0,c.Z)(e,"defaultProps",{allowScripts:!0,disableCkeditor:!1});let X=e;var Y={iframe:{height:"100%"}},Z={"sanitize-html":"https://cdn.jsdelivr.net/npm/sanitize-html@1.20.1/dist/sanitize-html.min.js","grapesjs-preset-newsletter.min.js":"https://cdn.jsdelivr.net/npm/grapesjs-preset-newsletter@0.2.15/dist/grapesjs-preset-newsletter.min.js"},$=function(a){a.getPanel().addButton("options",[{id:"edit-code",className:"gjs-pn-btn fa fa-code",command:function(b,c){(0,E.j)(a.getDesign(),function(a){b.runCommand("core:canvas-clear"),b.setComponents(a)})},attributes:{title:"Edit Html"}}])},f=function(d){(0,w.Z)(a,d);var e=(0,x.Z)(a);function a(){var b;(0,t.Z)(this,a);for(var f=arguments.length,g=new Array(f),d=0;d<f;d++)g[d]=arguments[d];return b=e.call.apply(e,[this].concat(g)),(0,c.Z)((0,v.Z)(b),"handleIframe",function(a){b.dIframe=a}),(0,c.Z)((0,v.Z)(b),"handleRemoveAsset",function(c){var d=b.props.onRemoveAsset,e=c.get("src"),g=b.editor.DomComponents.getWrapper(),f=(0,D.jE)((0,z.ZP)((0,D.jE)(b.iframeWindow.document).one("iframe"),["contentWindow","window","document"])),a=f.all('img[src="'+e+'"]');a&&a.length&&a.forEach(function(b){var a=f.ancestor(b,'[data-gjs-type="mj-image"]');a&&g.find("#"+a.id)[0].remove()}),(0,y.ZP)(d,[c])}),(0,c.Z)((0,v.Z)(b),"handleLoad",function(a){b.iframeWindow=b.dIframe.contentWindow.window,b.iframeWindow.debug=(0,v.Z)(b),(0,J.yu)(b.iframeWindow),b.timer=setInterval(function(){b.iframeWindow.initEditor&&(clearInterval(b.timer),b.handleInitGrapesJS())},10)}),(0,c.Z)((0,v.Z)(b),"handleInitGrapesJS",function(){var a=b.props,e=a.disableCkeditor,h=a.i18nMergeTags,i=a.font,j=a.mergeTags,k=a.onEditorInit,l=a.onBeforeEditorInit,m=a.init,f=["gjs-preset-newsletter"],c=e?null:b.iframeWindow.CKEDITOR,g={};e||(f.push("gjs-plugin-ckeditor"),U({grapesjs:b.iframeWindow.grapesjs,CKEDITOR:c}),g=Q({CKEDITOR:c,i18nMergeTags:h,font:i,mergeTags:j}));var d=(0,o.Z)({noticeOnUnload:!1,clearOnRender:!0,height:"100%",storageManager:{autosave:!1,autoload:!1,type:null},container:"#gjs",plugins:f,pluginsOpts:(0,o.Z)((0,o.Z)({},g),{},{"gjs-preset-newsletter":{modalLabelImport:"Paste all your code here below and click import",modalLabelExport:"Copy the code and use it wherever you want",codeViewerTheme:"material",cellStyle:{"font-size":"12px","font-weight":300,"vertical-align":"top",color:"rgb(111, 119, 125)",margin:0,padding:0}}})},m);(0,y.ZP)(l,[{CKEDITOR:c,initGrapesJS:d,component:(0,v.Z)(b)}]),b.editor=b.iframeWindow.initEditor(d),b.initGrapesJS=d,b.editor.on("load",b.handleEditorLoad),b.editor.on("asset:remove",b.handleRemoveAsset),(0,y.ZP)(k,[{editor:b.editor,component:(0,v.Z)(b)}])}),(0,c.Z)((0,v.Z)(b),"handleEditorLoad",function(){var a=b.props,e=a.host,f=a.onEditorLoad,g=a.onError,c=a.design,h=a.images,i=b.iframeWindow.document;H(b.iframeWindow.sanitizeHtml),b.updateImages((0,z.ZP)(h));try{b.editor.setComponents(I(c))}catch(d){(0,y.ZP)(g,[{e:d,design:c,message:"HTML invalid syntax"}]),console.warn({e:d,design:c})}i.getElementById("root").className="",(0,y.ZP)(f,[{editor:b.editor,component:(0,v.Z)(b)}]),$(e)}),(0,c.Z)((0,v.Z)(b),"clearTimeout",function(){b.timer&&clearInterval(b.timer)}),b}return(0,u.Z)(a,[{key:"resetUploadField",value:function(){if(this.iframeWindow){var a=this.iframeWindow.document.getElementById("gjs-am-uploadFile");a&&(a.value="")}}},{key:"updateImages",value:function(a){if(a?this.images=a:a=this.images,this.editor){var b=this.editor.AssetManager;b&&a&&a.length&&b.add(a)}}},{key:"getAsset",value:function(a){return L(a,this.props,Z)}},{key:"getHtml",value:function(){var a=this.props.host,b=this.getDesign();return a.toHtml(b)}},{key:"getDesign",value:function(){return O({editor:this.editor})}},{key:"getImportButtonName",value:function(){return"gjs-open-import-template"}},{key:"componentWillUnmount",value:function(){this.clearTimeout()}},{key:"render",value:function(){var a=this.props,c=a.style,d=a.images,e=a.id,f=a.disableCkeditor;this.updateImages((0,z.ZP)(d));var g='\n      <link rel="stylesheet" href="'.concat(this.getAsset("grapes.min.css"),'" />\n      <style>\n        .gjs-pn-buttons {overflow: hidden}\n        .loading {display: none}\n        #root.hidden .loading {display: block; visibility: visible}\n        #root.hidden {visibility: hidden}\n        #root {height: 100vh;}\n      </style>\n      <script async src="').concat(this.getAsset("sanitize-html"),'"></script>\n      <script async src="').concat(this.getAsset("mjml.js"),'"></script>\n      <script src="').concat(this.getAsset("grapes.min.js"),'"></script>\n      ').concat(f?"":'<script src="'.concat(this.getAsset("ckeditor.js"),'"></script>'),'\n      <script src="').concat(this.getAsset("grapesjs-preset-newsletter.min.js"),'"></script>\n      <script>\n      window.initEditor = function(init) {\n         return grapesjs.init(init); \n      };\n     </script>\n     <div class="hidden" id="root">\n      <div class="loading">Loading...</div>\n      <div id="gjs"></div>\n     </div> \n    '),h=(0,o.Z)((0,o.Z)({},aa.iframe),c);return b.createElement(C.Z,{immutable:!0,id:e,style:h,refCb:this.handleIframe,onLoad:this.handleLoad},b.createElement(B.ER,null,g))}}]),a}(b.Component);(0,c.Z)(f,"defaultProps",{disableCkeditor:!1});let _=f;var aa={iframe:{height:"100%"}},ab={},ac="\n  <mjml>\n    <mj-body>\n        <mj-section>\n          <mj-column>\n            <mj-text>Content 1</mj-text>\n          </mj-column>\n        </mj-section>\n    </mj-body>\n  </mjml>\n",g=function(e){(0,w.Z)(d,e);var f=(0,x.Z)(d);function d(){var b;(0,t.Z)(this,d);for(var g=arguments.length,h=new Array(g),e=0;e<g;e++)h[e]=arguments[e];return b=f.call.apply(f,[this].concat(h)),(0,c.Z)((0,v.Z)(b),"handleIframe",function(a){b.dIframe=a}),(0,c.Z)((0,v.Z)(b),"handleLoad",function(d){var c,a=null===(c=b.dIframe.contentWindow)|| void 0===c?void 0:c.window;a&&(b.iframeWindow=a,a.debug=(0,v.Z)(b),(0,J.yu)(a),b.timer=setInterval(function(){a.initEditor&&a.mjml2html&&(clearInterval(b.timer),b.handleInitGrapesJS())},10))}),(0,c.Z)((0,v.Z)(b),"handleEditorLoad",function(){var a=b.props,d=a.onEditorLoad,c=a.design,e=a.images,f=a.host,g=b.iframeWindow.document;f.execUpdateImages((0,z.ZP)(e));var h=-1!==(c||"").indexOf("mj-body")?c:ac;b.editor.setComponents(h),g.getElementById("root").className="",(0,y.ZP)(d,[{editor:b.editor,component:(0,v.Z)(b)}])}),(0,c.Z)((0,v.Z)(b),"handleRemoveContent",function(a){"mj-body"===(0,z.ZP)(a,["attributes","tagName"])&&b.editor.setComponents(ac)}),(0,c.Z)((0,v.Z)(b),"handleRemoveAsset",function(c){var d=b.props.onRemoveAsset,e=c.get("src"),g=b.editor.DomComponents.getWrapper(),f=(0,D.jE)((0,z.ZP)((0,D.jE)(b.iframeWindow.document).one("iframe"),["contentWindow","window","document"])),a=f.all('img[src="'+e+'"]');a&&a.length&&a.forEach(function(b){var a=f.ancestor(b,'[data-gjs-type="mj-image"]');a&&g.find("#"+a.id)[0].remove()}),(0,y.ZP)(d,[c])}),(0,c.Z)((0,v.Z)(b),"handleInitGrapesJS",function(){var c=b.props,e=c.disableCkeditor,h=c.i18nMergeTags,i=c.font,j=c.mergeTags,n=c.onEditorInit,k=c.onBeforeEditorInit,l=c.init,f=["grapesjs-mjml"],d=e?null:b.iframeWindow.CKEDITOR,g={};e||(f.push("gjs-plugin-ckeditor"),U({grapesjs:b.iframeWindow.grapesjs,CKEDITOR:d}),g=Q({CKEDITOR:d,i18nMergeTags:h,font:i,mergeTags:j}));var m=(0,o.Z)({noticeOnUnload:!1,clearOnRender:!0,height:"100%",storageManager:{autosave:!1,autoload:!1,type:null},container:"#gjs",plugins:f,pluginsOpts:(0,o.Z)((0,o.Z)({},g),{},{"grapesjs-mjml":{columnsPadding:0}})},l);(0,y.ZP)(k,[{CKEDITOR:d,initGrapesJS:m,component:(0,v.Z)(b)}]),a.e(48).then(a.bind(a,459)).then(function(a){a=(0,z.MV)(a),b.editor=b.iframeWindow.initEditor(m,a),b.initGrapesJS=m,b.editor.on("load",b.handleEditorLoad),b.editor.on("component:remove",b.handleRemoveContent),b.editor.on("asset:remove",b.handleRemoveAsset),(0,y.ZP)(n,[{editor:b.editor,component:(0,v.Z)(b)}])})}),(0,c.Z)((0,v.Z)(b),"clearTimeout",function(){b.timer&&clearInterval(b.timer)}),b}return(0,u.Z)(d,[{key:"resetUploadField",value:function(){if(this.iframeWindow){var a=this.iframeWindow.document.getElementById("gjs-am-uploadFile");a&&(a.value="")}}},{key:"getAsset",value:function(a){return L(a,this.props,ab)}},{key:"getHtml",value:function(){var a=this.editor.runCommand("mjml-get-code");if(a&&a.html)return a.html.trim()}},{key:"getDesign",value:function(){var a=(this.editor.getHtml()||"").trim();return a.replace(/(\<mj\-image)([^\>]*)(\>)/gi,function(a){return a.substring(0,a.length-2)+"></mj-image>"})}},{key:"getImportButtonName",value:function(){return"mjml-import"}},{key:"componentWillUnmount",value:function(){this.clearTimeout()}},{key:"render",value:function(){var a=this.props,c=a.style,d=a.images,e=a.id,f=a.disableCkeditor,g=a.host;g.execUpdateImages((0,z.ZP)(d));var h='\n      <link rel="stylesheet" href="'.concat(this.getAsset("grapes.min.css"),'" />\n      <style>\n        .gjs-pn-buttons {overflow: hidden}\n        .loading {display: none}\n        #root.hidden .loading {display: block; visibility: visible}\n        #root.hidden {visibility: hidden}\n        #root {height: 100vh;}\n      </style>\n      <script async src="').concat(this.getAsset("mjml.js"),'"></script>\n      <script src="').concat(this.getAsset("grapes.min.js"),'"></script>\n      ').concat(f?"":'<script src="'.concat(this.getAsset("ckeditor.js"),'"></script>'),'\n      <script>\n        window.initEditor = function(init, mjml) {\n           grapesjs.plugins.add(\'grapesjs-mjml\', mjml);\n           return grapesjs.init(init); \n        };\n     </script>\n     <div class="hidden" id="root">\n      <div class="loading">Loading...</div>\n      <div id="gjs"></div>\n     </div> \n    '),i=(0,o.Z)((0,o.Z)({},ae.iframe),c);return b.createElement(C.Z,{immutable:!0,id:e,style:i,refCb:this.handleIframe,onLoad:this.handleLoad},b.createElement(B.ER,null,h))}}]),d}(b.Component);(0,c.Z)(g,"defaultProps",{disableCkeditor:!1});let ad=g;var ae={iframe:{height:"100%"}},af=["web","debug","type","onReset"],ag=0,h=function(d){(0,w.Z)(a,d);var e=(0,x.Z)(a);function a(){var b;(0,t.Z)(this,a);for(var f=arguments.length,g=new Array(f),d=0;d<f;d++)g[d]=arguments[d];return b=e.call.apply(e,[this].concat(g)),(0,c.Z)((0,v.Z)(b),"state",{id:null}),(0,c.Z)((0,v.Z)(b),"handleEditorInit",function(a){var c=b.props.onEditorInit;b.editor=a.editor,(0,y.ZP)(c,[a])}),(0,c.Z)((0,v.Z)(b),"handleEl",function(a){return b.el=a}),b}return(0,u.Z)(a,[{key:"getType",value:function(){var a=this.props,b=a.web,c=a.type;return b||"html"===c?"html":"mjml"}},{key:"getPanel",value:function(){return(0,z.ZP)(this.editor,["Panels"])}},{key:"getButtons",value:function(a){return this.getPanel().getPanel(a).get("buttons")}},{key:"beforeGetCode",value:function(){var b=this.getEditor();if(!b)return!1;var a=b.getSelected();return a&&a.view&&a.view.disableEditing&&a.view.disableEditing(),!0}},{key:"store",value:function(b){if(this.el&&this.el.store){var a;null===(a=this.el)|| void 0===a||a.store(b)}else(0,y.ZP)(b,[{html:this.getHtml(),design:this.getDesign()}])}},{key:"getHtml",value:function(b){var a;if(this.beforeGetCode())return(null===(a=this.el)|| void 0===a?void 0:a.getHtml(b))||""}},{key:"getDesign",value:function(){var a;if(this.beforeGetCode())return(null===(a=this.el)|| void 0===a?void 0:a.getDesign())||""}},{key:"getEditor",value:function(){return this.editor}},{key:"toHtml",value:function(a,b){if(a&&!b)return a='\n<!DOCTYPE html>\n<html xmlns="http://www.w3.org/1999/xhtml" xmlns:v="urn:schemas-microsoft-com:vml" xmlns:o="urn:schemas-microsoft-com:office:office">\n<head>\n  <meta http-equiv="X-UA-Compatible" content="IE=edge">\n  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">\n  <meta name="viewport" content="width=device-width, initial-scale=1">\n</head>\n<body>\n'.concat(a,"\n</body>\n</html>\n")}},{key:"disableImport",value:function(){var d=this.getType(),a=this.getPanel(),b=this.el.getImportButtonName();if("html"===d){var c=a.getButton("options",b);null==c||c.set("attributes",{style:"display:none"});return}return a.removeButton("options",b)}},{key:"disableExport",value:function(){var b=this.getType(),a=this.getPanel();if("html"!==b)return a.removeButton("options","export-template");a.getButton("options","export-template").set("attributes",{style:"display:none"})}},{key:"execReset",value:function(){var a=this.props,b=a.onReset,c=a.images;(0,y.ZP)(b,[{editor:this.editor,component:this.el}]),this.execUpdateImages((0,z.ZP)(c))}},{key:"execClean",value:function(){var a;confirm(this.props.i18nCleanCanvas)&&(this.editor.runCommand("core:canvas-clear"),this.execReset())}},{key:"execUpdateImages",value:function(a){if(a?this.images=a:a=this.images,this.editor){var b=this.editor.AssetManager;b&&a&&a.length&&b.add(a)}}},{key:"componentDidMount",value:function(){var a,b=this.props,c=b.id,d=b.debug;c?a=c:(a="grapejs-"+ag,ag++),d&&console.log('$("#'.concat(a,'").contentWindow.window.debug')),this.setState({id:a})}},{key:"render",value:function(){var c=this.props,e=c.web,a=(c.debug,c.type,c.onReset,(0,s.Z)(c,af)),d=this.state.id;return d?(a.id=d,a.onEditorInit=this.handleEditorInit,a.host=this,"html"===this.getType()?e?b.createElement(X,(0,r.Z)({ref:this.handleEl},a)):b.createElement(_,(0,r.Z)({ref:this.handleEl},a)):b.createElement(ad,(0,r.Z)({ref:this.handleEl},a))):null}}]),a}(b.Component);(0,c.Z)(h,"defaultProps",{i18nMergeTags:"Merge Tags",i18nCleanCanvas:"Are you sure to clean the canvas?"});let ah=h;var ai=a(0);let aj=function(){return(0,ai.jsx)(ah,{style:ak.container,debug:!0})};var ak={container:{minHeight:600}},al=function(){return k||(k=(0,ai.jsx)("div",{}))};let am=function(){return l||(l=(0,ai.jsx)(al,{}))},an=function(a){return(0,q.Z)((0,o.Z)((0,o.Z)({},a),{},{pageName:"GrapesJs"})),(0,ai.jsxs)(ai.Fragment,{children:[m||(m=(0,ai.jsx)(p.Z,{code:'import React from "react";\nimport { GrapesJsController } from "organism-react-grapesjs";\n\nconst GrapesJsExample = () => (\n  <GrapesJsController style={Styles.container} debug />\n);\n\nexport default GrapesJsExample;\n\nconst Styles = {\n  container: {\n    minHeight: 600,\n  },\n};\n',header:"GrapesJs Example",edit:"https://codesandbox.io/s/organism-react-grapesjs-04mo7",git:"react-atomic/react-atomic-organism/tree/main/packages/organism-react-grapesjs/",children:(0,ai.jsx)(aj,{})})),n||(n=(0,ai.jsx)(p.Z,{code:'import React from "react";\n// import { Editor } from "organism-react-rte-writer";\nconst Editor = () => <div />;\n\nconst RTEExample = () => {\n  return <Editor />;\n};\n\nexport default RTEExample;\n\nconst Styles = {};\n',header:"RTE Example",children:(0,ai.jsx)(am,{})}))]})}}}])